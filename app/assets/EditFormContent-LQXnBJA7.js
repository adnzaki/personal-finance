import{ap as O,r as f,c as T,ah as w,l as y,m as t,f as a,n as o,K as r,I as i,t as S,u as s,q as E,F as K,aj as D,Q as J,M as Q,J as C,G as c,an as j,aq as M}from"./index-BEae-QxD.js";import{Q as U,a as b,b as $}from"./QItemLabel-CbsxHInV.js";import{Q as A}from"./QList-Dzw1nEIw.js";import{Q as G}from"./QForm-CN_ri50F.js";import{u as P}from"./fund-store-_DXh2S9h.js";import{u as R}from"./use-quasar-D4Rp_hc1.js";import{v as z,f as H}from"./utils-Bi8AkgVO.js";import{M as W}from"./cleave-zen.module-C_RbzF5G.js";const se={__name:"EditFormContent",props:{mobile:{type:Boolean,default:!1}},setup(g){const q=g,e=P(),I=O(),V=R(),n=f(!1),m=f(!0),k=T(()=>e.data.kepemilikan),p=()=>{m.value=!1,e.save(h)},B=u=>{e.data.ownerId=u.value,e.data.ownerName=u.label},_=()=>{e.addBalance(),n.value=!1,m.value=!0},F=()=>{if(e.ownerList.length>0){n.value=!0;const u=f(null);setTimeout(()=>{u.value=document.querySelector(".saldo"),u.value.addEventListener("input",d=>{const v=d.target.value;e.data.balance=W(v)})},500)}else V.notify({type:"negative",message:"Silakan tambah data pemilik terlebih dahulu",position:"center"})},L=()=>{n.value=!1},h=()=>{q.mobile?I.push("/sumber-dana"):e.showEditForm=!1,e.fundId=null,e.data={nama:"",kepemilikan:[],ownerName:"",ownerId:null,balance:0}};return(u,d)=>{const v=w("dropdown-search"),N=w("save-btn");return t(),y("div",null,[a(j,{class:"scroll card-section"},{default:o(()=>[a(G,{class:"q-gutter-xs",onSubmit:p},{default:o(()=>[a(S,{outlined:"",modelValue:s(e).data.nama,"onUpdate:modelValue":d[0]||(d[0]=l=>s(e).data.nama=l),class:"rounded-field",label:"Nama Sumber Dana"},null,8,["modelValue"]),n.value?(t(),r(v,{key:0,onSelected:B,label:"Pilih Kepemilikan",list:s(e).ownerList,"options-value":{label:"kepemilikan",value:"id"},"load-on-route":"","custom-class":"rounded-field q-mt-md"},null,8,["list"])):i("",!0),n.value?(t(),r(S,{key:1,outlined:"",modelValue:s(e).data.balance,"onUpdate:modelValue":d[1]||(d[1]=l=>s(e).data.balance=l),class:"rounded-field q-mt-md",label:"Jumlah Saldo","input-class":"saldo",rules:[l=>s(z)(l)||"Jumlah Saldo Tidak Valid"],onKeyup:E(_,["enter"])},null,8,["modelValue","rules"])):i("",!0),k.value.length>0&&m.value?(t(),r(A,{key:2,bordered:"",class:"rounded-borders q-mt-md",separator:""},{default:o(()=>[(t(!0),y(K,null,D(k.value,(l,x)=>(t(),r(U,{clickable:"",key:x},{default:o(()=>[a(b,{avatar:""},{default:o(()=>[a(J,{name:"credit_card"})]),_:1}),a(b,null,{default:o(()=>[Q(C(l.name)+" ",1),a($,{caption:""},{default:o(()=>[Q(C(s(H)(l.jumlah_dana)),1)]),_:2},1024)]),_:2},1024),a(b,{side:""},{default:o(()=>[a(c,{class:"custom-round",flat:"",color:"primary",icon:"r_delete_outline",onClick:X=>s(e).removeBalance(l)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):i("",!0),n.value?i("",!0):(t(),r(c,{key:3,unelevated:"",label:"Tambah Saldo",onClick:F,class:"save-btn q-mt-md",color:"blue",icon:"add",style:{width:"100%"}})),n.value?(t(),r(c,{key:4,unelevated:"",label:"Simpan Saldo",onClick:_,class:"save-btn q-mt-md",color:"blue",icon:"save",style:{width:"100%"}})):i("",!0),n.value?(t(),r(c,{key:5,unelevated:"",label:"Batalkan",onClick:L,class:"save-btn q-mt-md",color:"negative",icon:"close",style:{width:"100%"}})):i("",!0)]),_:1})]),_:1}),a(M,{align:"right"},{default:o(()=>[a(c,{flat:"",label:"Tutup",onClick:h,class:"custom-round close-btn",color:"negative"}),a(c,{unelevated:"",label:"Simpan",onClick:p,class:"save-btn mobile-hide",color:"primary"})]),_:1}),a(N,{onClick:p})])}}};export{se as _};
