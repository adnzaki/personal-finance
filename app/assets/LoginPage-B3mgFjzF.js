import{c as d,x as J,r as l,a5 as p,a9 as W,o as X,h as m,av as Y,O as Z,bA as $,w as ee,aL as P,g as ae,_ as te,u as B,J as ie,n as _,j as v,H as f,an as ne,q as D,am as oe,M as V,Q as R,p as U,v as le,m as se,I as re,K as ue,G as ce,t as w,L as j,au as E}from"./index-CDT5vLCL.js";import{Q as de}from"./QPageContainer-Cs_dZvBE.js";import{a as ge}from"./QLayout-KcOsiI3o.js";import{u as F}from"./use-quasar-dzG0vDdZ.js";const me={ratio:[String,Number]};function ve(e,i){return d(()=>{const s=Number(e.ratio||(i!==void 0?i.value:void 0));return isNaN(s)!==!0&&s>0?{paddingBottom:`${100/s}%`}:null})}const fe=1.7778,he=J({name:"QImg",props:{...me,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:fe},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:i,emit:s}){const t=l(e.initialRatio),h=ve(e,t),g=ae(),{registerTimeout:n,removeTimeout:u}=p(),{registerTimeout:C,removeTimeout:b}=p(),k=d(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),q=d(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),r=[l(null),l(k.value)],c=l(0),o=l(!1),y=l(!1),L=d(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),T=d(()=>({width:e.width,height:e.height})),N=d(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),Q=d(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function H(){if(b(),e.loadingShowDelay===0){o.value=!0;return}C(()=>{o.value=!0},e.loadingShowDelay)}function I(){b(),o.value=!1}function O({target:a}){P(g)===!1&&(u(),t.value=a.naturalHeight===0?.5:a.naturalWidth/a.naturalHeight,z(a,1))}function z(a,S){S===1e3||P(g)===!0||(a.complete===!0?K(a):n(()=>{z(a,S+1)},50))}function K(a){P(g)!==!0&&(c.value=c.value^1,r[c.value].value=null,I(),a.getAttribute("__qerror")!=="true"&&(y.value=!1),s("load",a.currentSrc||a.src))}function A(a){u(),I(),y.value=!0,r[c.value].value=q.value,r[c.value^1].value=k.value,s("error",a)}function M(a){const S=r[a].value,x={key:"img_"+a,class:N.value,style:Q.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...S};return c.value===a?Object.assign(x,{class:x.class+"current",onLoad:O,onError:A}):x.class+="loaded",m("div",{class:"q-img__container absolute-full",key:"img"+a},m("img",x))}function G(){return o.value===!1?m("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},Z(i[y.value===!0?"error":"default"])):m("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},i.loading!==void 0?i.loading():e.noSpinner===!0?void 0:[m($,{color:e.spinnerColor,size:e.spinnerSize})])}{let a=function(){ee(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,S=>{u(),y.value=!1,S===null?(I(),r[c.value^1].value=k.value):H(),r[c.value].value=S},{immediate:!0})};W.value===!0?X(a):a()}return()=>{const a=[];return h.value!==null&&a.push(m("div",{key:"filler",style:h.value})),r[0].value!==null&&a.push(M(0)),r[1].value!==null&&a.push(M(1)),a.push(m(Y,{name:"q-transition--fade"},G)),m("div",{key:"main",class:L.value,style:T.value,role:"img","aria-label":e.alt},a)}}}),Se={__name:"LoginPage",setup(e,{expose:i}){i();const s=F(),t=l(""),h=l(""),g=l(!1),n=l(""),u=l("black"),C=d(()=>s.screen.lt.sm?"col-12 q-ml-sm":""),b=l(!1),q={$q:s,username:t,password:h,showMsg:g,msg:n,msgClass:u,cardMobileSize:C,showPassword:b,validate:()=>{n.value="",g.value=!0;const r=()=>g.value=!1;if(t.value===""||h.value==="")n.value="Username dan password wajib diisi",u.value="negative",setTimeout(r,6e3);else{const c={username:t.value,password:h.value};u.value="black",n.value="Memroses autentikasi...",j.post("validate-login",c,{transformRequest:[o=>E(o)]}).then(({data:o})=>{if(o.status==="failed")n.value=o.message,u.value="negative";else{n.value="Login berhasil. Mengalihkan ke halaman utama...",u.value="positive",w.cookieExp*=12*360;const y=new Date,L=y.getTime(),T=L+w.cookieExp,N=new Date(T),Q={expires:N.toUTCString(),path:"/",sameSite:"None",secure:!0};s.cookies.set(w.cookieName,o.token,Q),localStorage.setItem("username",o.user.username),window.location.href=w.homeUrl()}}).catch(o=>{n.value=o,u.value="negative",setTimeout(r,6e3)})}},ref:l,computed:d,get conf(){return w},get api(){return j},get createFormData(){return E},get useQuasar(){return F}};return Object.defineProperty(q,"__isScriptSetup",{enumerable:!1,value:!0}),q}},ye={class:"q-pa-md q-mt-lg row items-start q-gutter-md"},_e={class:"text-center q-mb-md"},we={class:"q-gutter-lg q-mt-lg"},be={class:"q-mt-xl"},ke=["href"];function qe(e,i,s,t,h,g){return B(),ie(ge,{view:"hHh lpR fFf",class:"login-layout"},{default:_(()=>[v(de,null,{default:_(()=>[f("div",ye,[v(ne,{class:D(["login-card col-md-4 col-sm-8 offset-md-4 offset-sm-2",t.cardMobileSize])},{default:_(()=>[v(oe,null,{default:_(()=>[f("div",_e,[v(he,{src:"main-logo.png",alt:"SisaUang Logo",style:{"max-width":"100px","max-height":"100px",margin:"auto"}})]),i[4]||(i[4]=f("div",{class:"text-h6 text-center"},[V(" Login ke "),f("strong",null,"SisaUang")],-1)),f("div",we,[v(R,{outlined:"",modelValue:t.username,"onUpdate:modelValue":i[0]||(i[0]=n=>t.username=n),label:"Username",onKeyup:U(t.validate,["enter"]),class:"rounded-field"},null,8,["modelValue"]),v(R,{outlined:"",modelValue:t.password,"onUpdate:modelValue":i[2]||(i[2]=n=>t.password=n),label:"Password",onKeyup:U(t.validate,["enter"]),class:"rounded-field",type:t.showPassword?"text":"password"},{append:_(()=>[v(le,{name:t.showPassword?"visibility_off":"visibility",class:"cursor-pointer",onClick:i[1]||(i[1]=n=>t.showPassword=!t.showPassword)},null,8,["name"])]),_:1},8,["modelValue","type"])]),t.showMsg?(B(),se("p",{key:0,class:D([`text-bold text-${t.msgClass}`,"q-mt-md"])},re(t.msg),3)):ue("",!0),v(ce,{color:"primary",size:"lg",icon:"r_login",label:"Sign In",class:"full-width q-mt-xl custom-round",onClick:t.validate}),f("p",be,[i[3]||(i[3]=V(" Belum punya akun? Daftar ")),f("strong",null,[f("a",{class:"link-style",href:t.conf.registerUrl()},"di sini",8,ke)])])]),_:1})]),_:1},8,["class"])])]),_:1})]),_:1})}const Ne=te(Se,[["render",qe],["__scopeId","data-v-14b1ab92"],["__file","LoginPage.vue"]]);export{Ne as default};
