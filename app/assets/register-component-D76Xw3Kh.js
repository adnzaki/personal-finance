import{N as ne,_ as $,c as l,w as E,l as _,m as I,f as k,n as F,u as O,p as oe,q as h,Q as W,t as ie,v as p,x as ue,y as se,z as re,g as ce,A as de,r as q,B as me,C as z,D as ve,E as fe,h as w,G as M,H as L,I as ge,J as R,K,L as be,M as ye}from"./index-Dlsrf9s6.js";import{u as T}from"./use-quasar-BmNujI6l.js";import{u as G}from"./index-aGTDYWLm.js";import{d as he}from"./screen-CyuzGlmd.js";import{Q as Se,a as xe}from"./QItemSection-D-1dN4E2.js";import{Q as _e}from"./QSelect-CqLCzR4V.js";import"./selection-CBPnso1j.js";function ke(e,s="positive",u="top"){ne.create({message:e,position:u,color:s,multiline:!0})}function H(){ke("Something went wrong, please refresh this page.","negative")}const Ve={__name:"SearchBox",props:{label:{type:String},rootClass:{type:String,default:"col-12 col-md-4"}},setup(e){const s=G(),u=T();let o=l(()=>s.state.search);E(o,()=>s.onSearchChanged());const c=l(()=>u.screen.lt.sm?"rounded-field":""),i=()=>{u.cookies.has(p.cookieName)?s.filter():H()};return(n,b)=>(_(),I("div",{class:h([e.rootClass,"justify-data-options"])},[k(W,{outlined:"","bottom-slots":"",modelValue:O(s).state.search,"onUpdate:modelValue":b[0]||(b[0]=r=>O(s).state.search=r),label:e.label,onKeyup:oe(i,["enter"]),dense:O(he)(),class:h(c.value)},{append:F(()=>[k(ie,{name:"search",onClick:i,class:"cursor-pointer"})]),_:1},8,["modelValue","label","dense","class"])],2))}},Be=$(Ve,[["__file","SearchBox.vue"]]);function D(e,s){return[!0,!1].includes(e)?e:s}const Ce=ue({name:"QPagination",props:{...se,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||re.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:s}){const{proxy:u}=ce(),{$q:o}=u,c=de(e,o),i=l(()=>parseInt(e.min,10)),n=l(()=>parseInt(e.max,10)),b=l(()=>parseInt(e.maxPages,10)),r=l(()=>x.value+" / "+n.value),d=l(()=>D(e.boundaryLinks,e.input)),v=l(()=>D(e.boundaryNumbers,!e.input)),f=l(()=>D(e.directionLinks,e.input)),S=l(()=>D(e.ellipses,!e.input)),P=q(null),x=l({get:()=>e.modelValue,set:t=>{if(t=parseInt(t,10),e.disable||isNaN(t))return;const a=me(t,i.value,n.value);e.modelValue!==a&&s("update:modelValue",a)}});E(()=>`${i.value}|${n.value}`,()=>{x.value=e.modelValue});const J=l(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),Q=l(()=>e.gutter in z?`${z[e.gutter]}px`:e.gutter||null),X=l(()=>Q.value!==null?`--q-pagination-gutter-parent:-${Q.value};--q-pagination-gutter-child:${Q.value}`:null),N=l(()=>{const t=[e.iconFirst||o.iconSet.pagination.first,e.iconPrev||o.iconSet.pagination.prev,e.iconNext||o.iconSet.pagination.next,e.iconLast||o.iconSet.pagination.last];return o.lang.rtl===!0?t.reverse():t}),Y=l(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),j=l(()=>ve(e,"flat")),Z=l(()=>({[j.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),ee=l(()=>{const t={[j.value]:!1};return e.activeDesign!==""&&(t[e.activeDesign]=!0),t}),te=l(()=>({...ee.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),V=l(()=>{let t=Math.max(b.value,1+(S.value?2:0)+(v.value?2:0));const a={pgFrom:i.value,pgTo:n.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(n.value).length)}em`}};return b.value&&t<n.value-i.value+1&&(t=1+Math.floor(t/2)*2,a.pgFrom=Math.max(i.value,Math.min(n.value-t+1,e.modelValue-Math.floor(t/2))),a.pgTo=Math.min(n.value,a.pgFrom+t-1),v.value&&(a.boundaryStart=!0,a.pgFrom++),S.value&&a.pgFrom>i.value+(v.value?1:0)&&(a.ellipsesStart=!0,a.pgFrom++),v.value&&(a.boundaryEnd=!0,a.pgTo--),S.value&&a.pgTo<n.value-(v.value?1:0)&&(a.ellipsesEnd=!0,a.pgTo--)),a});function A(t){x.value=t}function ae(t){x.value=x.value+t}const le=l(()=>{function t(){x.value=P.value,P.value=null}return{"onUpdate:modelValue":a=>{P.value=a},onKeyup:a=>{fe(a,13)===!0&&t()},onBlur:t}});function g(t,a,B){const y={"aria-label":a,"aria-current":"false",...Z.value,...t};return B===!0&&Object.assign(y,{"aria-current":"true",...te.value}),a!==void 0&&(e.toFn!==void 0?y.to=e.toFn(a):y.onClick=()=>{A(a)}),w(M,y)}return Object.assign(u,{set:A,setByOffset:ae}),()=>{const t=[],a=[];let B;if(d.value===!0&&(t.push(g({key:"bls",disable:e.disable||e.modelValue<=i.value,icon:N.value[0]},i.value)),a.unshift(g({key:"ble",disable:e.disable||e.modelValue>=n.value,icon:N.value[3]},n.value))),f.value===!0&&(t.push(g({key:"bdp",disable:e.disable||e.modelValue<=i.value,icon:N.value[1]},e.modelValue-1)),a.unshift(g({key:"bdn",disable:e.disable||e.modelValue>=n.value,icon:N.value[2]},e.modelValue+1))),e.input!==!0){B=[];const{pgFrom:y,pgTo:U,marginalStyle:C}=V.value;if(V.value.boundaryStart===!0){const m=i.value===e.modelValue;t.push(g({key:"bns",style:C,disable:e.disable,label:i.value},i.value,m))}if(V.value.boundaryEnd===!0){const m=n.value===e.modelValue;a.unshift(g({key:"bne",style:C,disable:e.disable,label:n.value},n.value,m))}V.value.ellipsesStart===!0&&t.push(g({key:"bes",style:C,disable:e.disable,label:"…",ripple:!1},y-1)),V.value.ellipsesEnd===!0&&a.unshift(g({key:"bee",style:C,disable:e.disable,label:"…",ripple:!1},U+1));for(let m=y;m<=U;m++)B.push(g({key:`bpg${m}`,style:C,disable:e.disable,label:m},m,m===e.modelValue))}return w("div",{class:J.value,...Y.value},[w("div",{class:"q-pagination__content row no-wrap items-center",style:X.value},[...t,e.input===!0?w(W,{class:"inline",style:{width:`${r.value.length/1.5}em`},type:"number",dense:!0,value:P.value,disable:e.disable,dark:c.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:r.value,min:i.value,max:n.value,...le.value}):w("div",{class:"q-pagination__middle row justify-center"},B),...a])])}}}),we={class:"q-pa-sm"},pe={class:"row"},Pe={__name:"DataNavigator",props:{modelValue:[Number,String],rangeWidth:{type:String,default:"col-12 col-md-6"},navWidth:{type:String,default:"col-10 col-md-2"},navOffset:{type:String,default:"offset-md-3"}},emits:["update:modelValue"],setup(e,{emit:s}){const u=s,o=T(),c=G(),i=()=>l(()=>c.state.pageLinks).value.length,n=r=>{o.cookies.has(p.cookieName)?(u("update:modelValue",r),c.nav(r-1)):H()},b=l(()=>c.rowRange());return(r,d)=>(_(),I("div",we,[L("div",pe,[L("div",{class:h([e.rangeWidth,"q-mt-sm"])},[L("p",null,ge(b.value),1)],2),L("div",{class:h(["col-2 col-md-1",e.navOffset])},[i()>0?(_(),R(M,{key:0,color:"primary",flat:"",class:"custom-round refresh-button",icon:"refresh",onClick:d[0]||(d[0]=v=>O(c).reloadData())})):K("",!0)],2),i()>0?(_(),I("div",{key:0,class:h([e.navWidth])},[k(Ce,{"model-value":e.modelValue,max:i(),input:"","onUpdate:modelValue":n},null,8,["model-value","max"])],2)):K("",!0)])]))}},Ne=$(Pe,[["__scopeId","data-v-de037904"],["__file","DataNavigator.vue"]]),Le={__name:"LogoutButton",setup(e){const s=T(),u=()=>{be.get("logout-user",{headers:{Authorization:`Bearer ${s.cookies.get(p.cookieName)}`}}).then(({data:o})=>{o.status==="success"&&(s.cookies.remove(p.cookieName),localStorage.removeItem("username"),window.location.href=p.loginUrl())})};return(o,c)=>(_(),R(M,{color:"negative",class:"custom-round",style:{width:"100%"},icon:"r_logout",label:"Logout",onClick:u}))}},De=$(Le,[["__file","LogoutButton.vue"]]),Fe={name:"DropdownSearch",props:["loader","labelAsOption","label","list","optionsValue","flexGrid","param","loadOnRoute","default","disable","customClass"],emits:["selected"],setup(e,{emit:s}){const u=q([]),o=q({}),c=q([]),i=r=>{s("selected",r),o.value=r};let n=null;return e.default!==void 0?n={label:e.default.label,value:e.default.value}:e.label===void 0&&(n={label:e.labelAsOption,value:null}),o.value=n,c.value=[n],(async()=>(e.loadOnRoute===void 0&&(e.param!==void 0?e.loader(e.param):e.loader()),new Promise((r,d)=>setTimeout(r,500))))().then(async()=>{const r=l(()=>e.list),d=async()=>{c.value=[],await r.value.forEach(f=>{c.value.push({label:f[e.optionsValue.label],value:f[e.optionsValue.value]})}),e.default===void 0&&(o.value=c.value[0])};await d(),E(r,d);const v=f=>[f.value,f];u.value=[...new Map(c.value.map(v)).values()]}),{options:u,model:o,filterFn(r,d,v){d(()=>{const f=r.toLowerCase();u.value=c.value.filter(S=>{if(S!==null)return S.label.toLowerCase().indexOf(f)>-1})})},selectedHandler:i}}};function Oe(e,s,u,o,c,i){return _(),I("div",{class:h(["col-12 q-mt-sm",u.flexGrid])},[k(_e,{class:h(u.customClass),disable:u.disable,outlined:"","model-value":o.model,"use-input":"","input-debounce":"0",options:o.options,onFilter:o.filterFn,"onUpdate:modelValue":o.selectedHandler,label:u.label},{"no-option":F(()=>[k(Se,null,{default:F(()=>[k(xe,{class:"text-grey"},{default:F(()=>[ye(" No results ")]),_:1})]),_:1})]),_:1},8,["class","disable","model-value","options","onFilter","onUpdate:modelValue","label"])],2)}const qe=$(Fe,[["render",Oe],["__file","DropdownSearch.vue"]]),Ae=({app:e})=>{e.component("search-box",Be),e.component("data-nav",Ne),e.component("logout-btn",De),e.component("dropdown-search",qe)};export{Ae as default};
