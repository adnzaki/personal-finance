import{_ as V,r as t,c as Q,l as f,J as S,n,f as l,H as c,an as L,q as _,am as M,Q as w,p as x,t as U,m as N,I as P,K as B,G as D,M as I,L as T,au as K,v as m}from"./index-znJFRDp3.js";import{a as z,b as E}from"./QLayout-CLEfokcd.js";import{u as $}from"./use-quasar-nI75N17h.js";const F={class:"q-pa-md q-mt-xl row items-start q-gutter-md"},H=c("div",{class:"text-h6 text-center"},[I(" Login "),c("strong",null,"SisaUang")],-1),R={class:"q-gutter-lg q-mt-lg"},j={__name:"LoginPage",setup(G){const g=$(),i=t(""),u=t("");t(!0);const d=t(!1),s=t(""),o=t("black"),k=Q(()=>g.screen.lt.sm?"col-12 q-ml-sm":""),r=t(!1),v=()=>{s.value="",d.value=!0;const p=()=>d.value=!1;if(i.value===""||u.value==="")s.value="Username dan password wajib diisi",o.value="negative",setTimeout(p,6e3);else{const a={username:i.value,password:u.value};s.value="Memroses autentikasi...",T.post("validate-login",a,{transformRequest:[e=>K(e)]}).then(({data:e})=>{if(e.status==="failed")s.value=e.message,o.value="negative";else{s.value="Login berhasil. Mengalihkan ke halaman utama...",o.value="positive",m.cookieExp*=12*360;const h=new Date,y=h.getTime(),b=y+m.cookieExp,q=new Date(b),C={expires:q.toUTCString(),path:"/",sameSite:"None",secure:!0};g.cookies.set(m.cookieName,e.token,C),localStorage.setItem("username",e.user.username),window.location.href=m.homeUrl()}}).catch(e=>{s.value=e,o.value="negative",setTimeout(p,6e3)})}};return(p,a)=>(f(),S(E,{view:"hHh lpR fFf",class:"login-layout"},{default:n(()=>[l(z,null,{default:n(()=>[c("div",F,[l(L,{class:_(["login-card col-md-4 col-sm-8 offset-md-4 offset-sm-2",k.value])},{default:n(()=>[l(M,null,{default:n(()=>[H,c("div",R,[l(w,{outlined:"",modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=e=>i.value=e),label:"Username",onKeyup:x(v,["enter"]),class:"rounded-field"},null,8,["modelValue"]),l(w,{outlined:"",modelValue:u.value,"onUpdate:modelValue":a[2]||(a[2]=e=>u.value=e),label:"Password",onKeyup:x(v,["enter"]),class:"rounded-field",type:r.value?"text":"password"},{append:n(()=>[l(U,{name:r.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[1]||(a[1]=e=>r.value=!r.value)},null,8,["name"])]),_:1},8,["modelValue","type"])]),d.value?(f(),N("p",{key:0,class:_([`text-bold text-${o.value}`,"q-mt-md"])},P(s.value),3)):B("",!0),l(D,{color:"primary",size:"lg",icon:"r_login",label:"Sign In",class:"full-width q-mt-xl custom-round",onClick:v})]),_:1})]),_:1},8,["class"])])]),_:1})]),_:1}))}},W=V(j,[["__file","LoginPage.vue"]]);export{W as default};
