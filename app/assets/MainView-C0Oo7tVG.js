import{ak as v,N as h,L as y,al as N,au as k,at as x,_ as f,r as n,u as i,m as d,j as o,n as t,Q as m,v as u,am as g,G as p,ap as _,F as C,ah as S,J as V,H as Q,I as b,an as q,q as B}from"./index-B7TI8NV3.js";import{w as L}from"./screen-B-FhL4iE.js";import{Q as M}from"./QForm-T6O64geI.js";import{Q as z}from"./QPageContainer-BBbIM6OI.js";const P=v("setting",{state:()=>({baseUrl:"settings/",data:{oldPassword:"",newPassword:"",confirmNewPassword:""}}),actions:{updatePassword(){const l=`${this.baseUrl}update-password`,e=h.create({group:!1,spinner:!0,message:"Mengubah password...",color:"info",position:"center",timeout:0});y.post(l,this.data,{headers:{Authorization:N},transformRequest:[r=>k(r)]}).then(({data:r})=>{e({timeout:x}),r.code===500?(this.error=r.msg,e({message:"Error! Silakan isi form dengan benar.",color:"negative",spinner:!1})):r.code===503?e({message:`Error! ${r.msg}`,color:"negative",spinner:!1}):(e({message:"Password berhasil diubah.",color:"positive",spinner:!1}),this.data={oldPassword:null,newPassword:null,confirmNewPassword:null})}).catch(({response:r})=>{e({message:`Error! ${r.data.msg}`,color:"negative",spinner:!1})})}}}),U={__name:"ChangePassword",setup(l,{expose:e}){e();const r=P(),s=n(!1),w=n(!1),c=n("Ganti Password"),a={store:r,showPassword:s,showNewPassword:w,btnLabel:c,get useSettingStore(){return P},ref:n};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}};function I(l,e,r,s,w,c){return i(),d(C,null,[o(g,{class:"scroll card-section"},{default:t(()=>[o(M,{class:"q-gutter-xs"},{default:t(()=>[o(m,{filled:"",modelValue:s.store.data.oldPassword,"onUpdate:modelValue":e[1]||(e[1]=a=>s.store.data.oldPassword=a),class:"rounded-field q-mb-md",label:"Password Saat Ini",type:s.showPassword?"text":"password","lazy-rules":"",rules:[a=>!!a||"Password saat ini harus diisi"]},{append:t(()=>[o(u,{name:s.showPassword?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[0]||(e[0]=a=>s.showPassword=!s.showPassword)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),o(m,{filled:"",modelValue:s.store.data.newPassword,"onUpdate:modelValue":e[3]||(e[3]=a=>s.store.data.newPassword=a),class:"rounded-field q-mb-md",label:"Password Baru","lazy-rules":"",type:s.showNewPassword?"text":"password",rules:[a=>!!a||"Password baru harus diisi"]},{append:t(()=>[o(u,{name:s.showNewPassword?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[2]||(e[2]=a=>s.showNewPassword=!s.showNewPassword)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),o(m,{filled:"",modelValue:s.store.data.confirmNewPassword,"onUpdate:modelValue":e[5]||(e[5]=a=>s.store.data.confirmNewPassword=a),class:"rounded-field",label:"Konfirmasi Password Baru","lazy-rules":"",type:s.showNewPassword?"text":"password",rules:[a=>!!a||"Silakan konfirmasi password baru terlebih dahulu",a=>a===s.store.data.newPassword||"Password tidak sama"]},{append:t(()=>[o(u,{name:s.showNewPassword?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[4]||(e[4]=a=>s.showNewPassword=!s.showNewPassword)},null,8,["name"])]),_:1},8,["modelValue","type","rules"])]),_:1})]),_:1}),o(_,{align:"center"},{default:t(()=>[o(p,{color:"primary",class:"btn-w95 save-btn q-mb-md mobile-only",label:s.btnLabel,onClick:e[6]||(e[6]=a=>s.store.updatePassword())},null,8,["label"])]),_:1}),o(_,{align:"left",class:"q-ml-sm"},{default:t(()=>[o(p,{color:"primary",class:"save-btn q-mb-md mobile-hide",label:s.btnLabel,onClick:e[7]||(e[7]=a=>s.store.updatePassword())},null,8,["label"])]),_:1})],64)}const T=f(U,[["render",I],["__file","ChangePassword.vue"]]),E={},F={class:"q-px-md row items-start logout-mobile"};function j(l,e){const r=S("logout-btn");return i(),V(z,null,{default:t(()=>[Q("div",F,[o(r,{class:"mobile-only"})])]),_:1})}const A=f(E,[["render",j],["__scopeId","data-v-4d4d6cc2"],["__file","LogoutMobile.vue"]]),D={__name:"MainView",setup(l,{expose:e}){e();const s={cardTitle:n("Ubah Password"),ref:n,get wrapperPadding(){return L},ChangePassword:T,LogoutMobile:A};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},G={key:0,class:"text-subtitle1 text-uppercase"},O={key:1,class:"text-h6 text-capitalize"};function H(l,e,r,s,w,c){return i(),d("div",{class:B(s.wrapperPadding())},[o(q,{class:"content-card"},{default:t(()=>[o(g,null,{default:t(()=>[l.$q.screen.lt.sm?(i(),d("div",G,b(s.cardTitle),1)):(i(),d("div",O,b(s.cardTitle),1))]),_:1}),o(s.ChangePassword)]),_:1}),o(s.LogoutMobile,{class:"mobile-only"})],2)}const X=f(D,[["render",H],["__file","MainView.vue"]]);export{X as default};
