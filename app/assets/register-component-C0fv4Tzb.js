import{N as ne,c as i,w as E,l as q,m as h,f as S,n as w,Q as oe,p,u as F,q as ie,t as W,v as B,x as se,y as ue,z as re,g as ce,A as de,r as P,B as me,C as U,D as ve,E as fe,h as C,G as I,H as O,I as K,J as ge,K as M,L as be,M as ye}from"./index-Ce0IJ7ho.js";import{u as A}from"./use-quasar-5TzLoxai.js";import{u as R}from"./index-DIENxvLL.js";import{d as he}from"./screen-Blkwldx0.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as Se}from"./login-store-D9TXeugO.js";import{Q as pe,a as ke}from"./QItemLabel-B9_w7Tra.js";import{Q as xe}from"./QSelect-CBcRKJhN.js";import{Q as _e}from"./QPageSticky-B71cxtLP.js";import"./QMenu-BZxrghfc.js";import"./selection-B128HIGI.js";import"./rtl-DFPa-2ov.js";function Ve(e,o="positive",s="top"){ne.create({message:e,position:s,color:o,multiline:!0})}function H(){Ve("Something went wrong, please refresh this page.","negative")}const Ce={__name:"SearchBox",props:{label:{type:String},rootClass:{type:String,default:"col-12 col-md-4"}},setup(e){const o=R(),s=A();let n=i(()=>o.state.search);E(n,()=>o.onSearchChanged());const r=i(()=>s.screen.lt.sm?"rounded-field":""),l=()=>{s.cookies.has(B.cookieName)?o.filter():H()};return(u,b)=>(h(),q("div",{class:p([e.rootClass,"justify-data-options"])},[S(W,{outlined:"","bottom-slots":"",modelValue:F(o).state.search,"onUpdate:modelValue":b[0]||(b[0]=c=>F(o).state.search=c),label:e.label,onKeyup:ie(l,["enter"]),dense:F(he)(),class:p(r.value)},{append:w(()=>[S(oe,{name:"search",onClick:l,class:"cursor-pointer"})]),_:1},8,["modelValue","label","dense","class"])],2))}};function D(e,o){return[!0,!1].includes(e)?e:o}const we=se({name:"QPagination",props:{...re,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||ue.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:o}){const{proxy:s}=ce(),{$q:n}=s,r=de(e,n),l=i(()=>parseInt(e.min,10)),u=i(()=>parseInt(e.max,10)),b=i(()=>parseInt(e.maxPages,10)),c=i(()=>k.value+" / "+u.value),f=i(()=>D(e.boundaryLinks,e.input)),d=i(()=>D(e.boundaryNumbers,!e.input)),m=i(()=>D(e.directionLinks,e.input)),Q=i(()=>D(e.ellipses,!e.input)),N=P(null),k=i({get:()=>e.modelValue,set:t=>{if(t=parseInt(t,10),e.disable||isNaN(t))return;const a=me(t,l.value,u.value);e.modelValue!==a&&o("update:modelValue",a)}});E(()=>`${l.value}|${u.value}`,()=>{k.value=e.modelValue});const J=i(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),$=i(()=>e.gutter in U?`${U[e.gutter]}px`:e.gutter||null),X=i(()=>$.value!==null?`--q-pagination-gutter-parent:-${$.value};--q-pagination-gutter-child:${$.value}`:null),L=i(()=>{const t=[e.iconFirst||n.iconSet.pagination.first,e.iconPrev||n.iconSet.pagination.prev,e.iconNext||n.iconSet.pagination.next,e.iconLast||n.iconSet.pagination.last];return n.lang.rtl===!0?t.reverse():t}),Y=i(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),T=i(()=>ve(e,"flat")),Z=i(()=>({[T.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),ee=i(()=>{const t={[T.value]:!1};return e.activeDesign!==""&&(t[e.activeDesign]=!0),t}),te=i(()=>({...ee.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),x=i(()=>{let t=Math.max(b.value,1+(Q.value?2:0)+(d.value?2:0));const a={pgFrom:l.value,pgTo:u.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(u.value).length)}em`}};return b.value&&t<u.value-l.value+1&&(t=1+Math.floor(t/2)*2,a.pgFrom=Math.max(l.value,Math.min(u.value-t+1,e.modelValue-Math.floor(t/2))),a.pgTo=Math.min(u.value,a.pgFrom+t-1),d.value&&(a.boundaryStart=!0,a.pgFrom++),Q.value&&a.pgFrom>l.value+(d.value?1:0)&&(a.ellipsesStart=!0,a.pgFrom++),d.value&&(a.boundaryEnd=!0,a.pgTo--),Q.value&&a.pgTo<u.value-(d.value?1:0)&&(a.ellipsesEnd=!0,a.pgTo--)),a});function j(t){k.value=t}function ae(t){k.value=k.value+t}const le=i(()=>{function t(){k.value=N.value,N.value=null}return{"onUpdate:modelValue":a=>{N.value=a},onKeyup:a=>{fe(a,13)===!0&&t()},onBlur:t}});function g(t,a,_){const y={"aria-label":a,"aria-current":"false",...Z.value,...t};return _===!0&&Object.assign(y,{"aria-current":"true",...te.value}),a!==void 0&&(e.toFn!==void 0?y.to=e.toFn(a):y.onClick=()=>{j(a)}),C(I,y)}return Object.assign(s,{set:j,setByOffset:ae}),()=>{const t=[],a=[];let _;if(f.value===!0&&(t.push(g({key:"bls",disable:e.disable||e.modelValue<=l.value,icon:L.value[0],"aria-label":n.lang.pagination.first},l.value)),a.unshift(g({key:"ble",disable:e.disable||e.modelValue>=u.value,icon:L.value[3],"aria-label":n.lang.pagination.last},u.value))),m.value===!0&&(t.push(g({key:"bdp",disable:e.disable||e.modelValue<=l.value,icon:L.value[1],"aria-label":n.lang.pagination.prev},e.modelValue-1)),a.unshift(g({key:"bdn",disable:e.disable||e.modelValue>=u.value,icon:L.value[2],"aria-label":n.lang.pagination.next},e.modelValue+1))),e.input!==!0){_=[];const{pgFrom:y,pgTo:z,marginalStyle:V}=x.value;if(x.value.boundaryStart===!0){const v=l.value===e.modelValue;t.push(g({key:"bns",style:V,disable:e.disable,label:l.value},l.value,v))}if(x.value.boundaryEnd===!0){const v=u.value===e.modelValue;a.unshift(g({key:"bne",style:V,disable:e.disable,label:u.value},u.value,v))}x.value.ellipsesStart===!0&&t.push(g({key:"bes",style:V,disable:e.disable,label:"…",ripple:!1},y-1)),x.value.ellipsesEnd===!0&&a.unshift(g({key:"bee",style:V,disable:e.disable,label:"…",ripple:!1},z+1));for(let v=y;v<=z;v++)_.push(g({key:`bpg${v}`,style:V,disable:e.disable,label:v},v,v===e.modelValue))}return C("div",{class:J.value,...Y.value},[C("div",{class:"q-pagination__content row no-wrap items-center",style:X.value},[...t,e.input===!0?C(W,{class:"inline",style:{width:`${c.value.length/1.5}em`},type:"number",dense:!0,value:N.value,disable:e.disable,dark:r.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:c.value,min:l.value,max:u.value,...le.value}):C("div",{class:"q-pagination__middle row justify-center"},_),...a])])}}}),Be={class:"q-pa-sm"},Pe={class:"row"},Ne={__name:"DataNavigator",props:{modelValue:[Number,String],rangeWidth:{type:String,default:"col-12 col-md-6"},navWidth:{type:String,default:"col-10 col-md-2"},navOffset:{type:String,default:"offset-md-3"}},emits:["update:modelValue"],setup(e,{emit:o}){const s=o,n=A(),r=R(),l=()=>i(()=>r.state.pageLinks).value.length,u=c=>{n.cookies.has(B.cookieName)?(s("update:modelValue",c),r.nav(c-1)):H()},b=i(()=>r.rowRange());return(c,f)=>(h(),q("div",Be,[O("div",Pe,[O("div",{class:p([e.rangeWidth,"q-mt-sm"])},[O("p",null,ge(b.value),1)],2),O("div",{class:p(["col-2 col-md-1",e.navOffset])},[l()>0?(h(),M(I,{key:0,color:"primary",flat:"",class:"custom-round refresh-button",icon:"refresh",onClick:f[0]||(f[0]=d=>F(r).reloadData())})):K("",!0)],2),l()>0?(h(),q("div",{key:0,class:p([e.navWidth])},[S(we,{"model-value":e.modelValue,max:l(),input:"","onUpdate:modelValue":u},null,8,["model-value","max"])],2)):K("",!0)])]))}},Le=G(Ne,[["__scopeId","data-v-a4fdc2e4"]]),Oe={__name:"LogoutButton",setup(e){const o=A(),s=Se(),n=()=>{be.get("logout-user",{headers:{Authorization:`Bearer ${o.cookies.get(B.cookieName)}`}}).then(({data:r})=>{if(r.status==="success"){const l=s.getSavedAccounts();s.removeAccount(),o.cookies.remove(B.cookieName,{path:"/"}),o.cookies.remove("sisauang_api_session"),localStorage.removeItem("username"),l.length>0&&(s.setCookieOptions(),localStorage.setItem("username",l[0].name),o.cookies.set(B.cookieName,l[0].token,s.cookieOptions)),window.location.reload()}})};return(r,l)=>(h(),M(I,{color:"negative",class:"custom-round",style:{width:"100%"},icon:"r_logout",label:"Logout",onClick:n}))}},De={name:"DropdownSearch",props:["loader","labelAsOption","label","list","optionsValue","flexGrid","param","loadOnRoute","default","disable","customClass"],emits:["selected"],setup(e,{emit:o}){const s=P([]),n=P({}),r=P([]),l=c=>{o("selected",c),n.value=c};let u=null;return e.default!==void 0?u={label:e.default.label,value:e.default.value}:e.label===void 0&&(u={label:e.labelAsOption,value:null}),n.value=u,r.value=[u],(async()=>(e.loadOnRoute===void 0&&(e.param!==void 0?e.loader(e.param):e.loader()),new Promise(c=>setTimeout(c,500))))().then(async()=>{const c=i(()=>e.list),f=async()=>{r.value=[],await c.value.forEach(m=>{r.value.push({label:m[e.optionsValue.label],value:m[e.optionsValue.value]})}),e.default===void 0&&(n.value=r.value[0])};await f(),E(c,f);const d=m=>[m.value,m];s.value=[...new Map(r.value.map(d)).values()]}),{options:s,model:n,filterFn(c,f){f(()=>{const d=c.toLowerCase();s.value=r.value.filter(m=>{if(m!==null)return m.label.toLowerCase().indexOf(d)>-1})})},selectedHandler:l}}};function Fe(e,o,s,n,r,l){return h(),q("div",{class:p(["col-12 q-mt-sm",s.flexGrid])},[S(xe,{class:p(s.customClass),disable:s.disable,outlined:"","model-value":n.model,"use-input":"","input-debounce":"0",options:n.options,onFilter:n.filterFn,"onUpdate:modelValue":n.selectedHandler,label:s.label},{"no-option":w(()=>[S(pe,null,{default:w(()=>[S(ke,{class:"text-grey"},{default:w(()=>o[0]||(o[0]=[ye(" No results ")])),_:1})]),_:1})]),_:1},8,["class","disable","model-value","options","onFilter","onUpdate:modelValue","label"])],2)}const qe=G(De,[["render",Fe]]),Ie={__name:"SaveButton",setup(e){const o=P([15,15]);return(s,n)=>(h(),M(_e,{position:"bottom",offset:o.value,class:"mobile-only mobile-save-btn-wrapper"},{default:w(()=>[S(I,{fab:"",label:"Simpan",class:"mobile-save-btn",color:"primary"})]),_:1},8,["offset"]))}},Ge=({app:e})=>{e.component("search-box",Ce),e.component("data-nav",Le),e.component("logout-btn",Oe),e.component("dropdown-search",qe),e.component("save-btn",Ie)};export{Ge as default};
