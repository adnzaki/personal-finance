import{c as m,x as K,r as i,g as O,a5 as z,a9 as A,o as G,h as c,av as J,O as W,bt as X,w as Y,aN as L,_ as Z,l as B,J as ee,n as q,f as d,H as g,an as te,q as D,am as ae,Q as M,p as V,t as ie,m as le,I as ne,K as oe,G as se,M as R,u as re,v as p,L as ue,au as ce,bu as de,bv as me}from"./index-UMOA-G-5.js";import{Q as ge}from"./QPageContainer-w1gj_-Ud.js";import{a as ve}from"./QLayout-C4ipkiK4.js";import{u as fe}from"./use-quasar-B_TyJm0N.js";const he={ratio:[String,Number]};function Se(e,r){return m(()=>{const l=Number(e.ratio||(r!==void 0?r.value:void 0));return isNaN(l)!==!0&&l>0?{paddingBottom:`${100/l}%`}:null})}const ye=1.7778,_e=K({name:"QImg",props:{...he,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:ye},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:r,emit:l}){const v=i(e.initialRatio),S=Se(e,v),n=O(),{registerTimeout:u,removeTimeout:k}=z(),{registerTimeout:y,removeTimeout:_}=z(),f=m(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),o=m(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),a=[i(null),i(f.value)],s=i(0),w=i(!1),b=i(!1),C=m(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),T=m(()=>({width:e.width,height:e.height})),U=m(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),P=m(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function $(){if(_(),e.loadingShowDelay===0){w.value=!0;return}y(()=>{w.value=!0},e.loadingShowDelay)}function I(){_(),w.value=!1}function j({target:t}){L(n)===!1&&(k(),v.value=t.naturalHeight===0?.5:t.naturalWidth/t.naturalHeight,N(t,1))}function N(t,h){h===1e3||L(n)===!0||(t.complete===!0?E(t):u(()=>{N(t,h+1)},50))}function E(t){L(n)!==!0&&(s.value=s.value^1,a[s.value].value=null,I(),t.getAttribute("__qerror")!=="true"&&(b.value=!1),l("load",t.currentSrc||t.src))}function H(t){k(),I(),b.value=!0,a[s.value].value=o.value,a[s.value^1].value=f.value,l("error",t)}function Q(t){const h=a[t].value,x={key:"img_"+t,class:U.value,style:P.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...h};return s.value===t?Object.assign(x,{class:x.class+"current",onLoad:j,onError:H}):x.class+="loaded",c("div",{class:"q-img__container absolute-full",key:"img"+t},c("img",x))}function F(){return w.value===!1?c("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},W(r[b.value===!0?"error":"default"])):c("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},r.loading!==void 0?r.loading():e.noSpinner===!0?void 0:[c(X,{color:e.spinnerColor,size:e.spinnerSize})])}{let t=function(){Y(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,h=>{k(),b.value=!1,h===null?(I(),a[s.value^1].value=f.value):$(),a[s.value].value=h},{immediate:!0})};A.value===!0?G(t):t()}return()=>{const t=[];return S.value!==null&&t.push(c("div",{key:"filler",style:S.value})),a[0].value!==null&&t.push(Q(0)),a[1].value!==null&&t.push(Q(1)),t.push(c(J,{name:"q-transition--fade"},F)),c("div",{key:"main",class:C.value,style:T.value,role:"img","aria-label":e.alt},t)}}}),we=e=>(de("data-v-75eed04b"),e=e(),me(),e),be={class:"q-pa-md q-mt-lg row items-start q-gutter-md"},ke={class:"text-center q-mb-md"},qe=we(()=>g("div",{class:"text-h6 text-center"},[R(" Login ke "),g("strong",null,"SisaUang")],-1)),pe={class:"q-gutter-lg q-mt-lg"},xe={class:"q-mt-xl"},Ce=["href"],Te={__name:"LoginPage",setup(e){const r=fe(),l=i(""),v=i("");i(!0);const S=i(!1),n=i(""),u=i("black"),k=m(()=>r.screen.lt.sm?"col-12 q-ml-sm":""),y=i(!1),_=()=>{n.value="",S.value=!0;const f=()=>S.value=!1;if(l.value===""||v.value==="")n.value="Username dan password wajib diisi",u.value="negative",setTimeout(f,6e3);else{const o={username:l.value,password:v.value};u.value="black",n.value="Memroses autentikasi...",ue.post("validate-login",o,{transformRequest:[a=>ce(a)]}).then(({data:a})=>{if(a.status==="failed")n.value=a.message,u.value="negative";else{n.value="Login berhasil. Mengalihkan ke halaman utama...",u.value="positive",p.cookieExp*=12*360;const s=new Date,w=s.getTime(),b=w+p.cookieExp,C=new Date(b),T={expires:C.toUTCString(),path:"/",sameSite:"None",secure:!0};r.cookies.set(p.cookieName,a.token,T),localStorage.setItem("username",a.user.username),window.location.href=p.homeUrl()}}).catch(a=>{n.value=a,u.value="negative",setTimeout(f,6e3)})}};return(f,o)=>(B(),ee(ve,{view:"hHh lpR fFf",class:"login-layout"},{default:q(()=>[d(ge,null,{default:q(()=>[g("div",be,[d(te,{class:D(["login-card col-md-4 col-sm-8 offset-md-4 offset-sm-2",k.value])},{default:q(()=>[d(ae,null,{default:q(()=>[g("div",ke,[d(_e,{src:"main-logo.png",alt:"SisaUang Logo",style:{"max-width":"100px","max-height":"100px",margin:"auto"}})]),qe,g("div",pe,[d(M,{outlined:"",modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=a=>l.value=a),label:"Username",onKeyup:V(_,["enter"]),class:"rounded-field"},null,8,["modelValue"]),d(M,{outlined:"",modelValue:v.value,"onUpdate:modelValue":o[2]||(o[2]=a=>v.value=a),label:"Password",onKeyup:V(_,["enter"]),class:"rounded-field",type:y.value?"text":"password"},{append:q(()=>[d(ie,{name:y.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[1]||(o[1]=a=>y.value=!y.value)},null,8,["name"])]),_:1},8,["modelValue","type"])]),S.value?(B(),le("p",{key:0,class:D([`text-bold text-${u.value}`,"q-mt-md"])},ne(n.value),3)):oe("",!0),d(se,{color:"primary",size:"lg",icon:"r_login",label:"Sign In",class:"full-width q-mt-xl custom-round",onClick:_}),g("p",xe,[R(" Belum punya akun? Daftar "),g("strong",null,[g("a",{class:"link-style",href:re(p).registerUrl()},"di sini",8,Ce)])])]),_:1})]),_:1},8,["class"])])]),_:1})]),_:1}))}},ze=Z(Te,[["__scopeId","data-v-75eed04b"],["__file","LoginPage.vue"]]);export{ze as default};
