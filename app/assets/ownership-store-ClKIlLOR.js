import{ak as c,as as p,N as m,L as n,al as i,at as l,au as h,t as u}from"./index-B3ERjQ3k.js";import{u as r}from"./index-Cu8SwIqk.js";const d=c("ownership",{state:()=>({baseUrl:"ownership/",error:{},current:1,showAddForm:!1,showEditForm:!1,disableButton:!1,formTitle:"Tambah Kepemilikan",data:{kepemilikan:""}}),actions:{deleteOwnership(t){p.create({title:"Hapus Kepemilikan",message:"Anda yakin ingin menghapus kepemilikan ini?",cancel:!0,persistent:!0}).onOk(()=>{const s=m.create({group:!1,spinner:!0,message:"Menghapus data kepemilikan...",color:"info",position:"center",timeout:0});n.get(`${this.baseUrl}delete/${t}`,{headers:{Authorization:i}}).then(({data:e})=>{s({timeout:l,message:e.msg,spinner:!1}),e.code===200?s({color:"positive",icon:"done"}):s({color:"negative",icon:"close"}),r().reloadData()}).catch(e=>{console.error(e),s({message:e.message,color:"negative",spinner:!1,timeout:l})})}).onCancel(()=>{})},getDetail(t,s){n.get(`${this.baseUrl}detail/${t}`,{headers:{Authorization:i}}).then(({data:e})=>{this.data=e,this.formTitle="Perbarui Kepemilikan",s()}).catch(e=>{console.error(e)})},save({id:t,afterSuccess:s}){const e=t!==null?`${this.baseUrl}save/${t}`:`${this.baseUrl}save`,o=m.create({group:!1,spinner:!0,message:"Menyimpan data kepemilikan...",color:"info",position:"center",timeout:0});n.post(e,this.data,{headers:{Authorization:i},transformRequest:[a=>h(a)]}).then(({data:a})=>{o({timeout:l}),a.code===500?(this.error=a.msg,o({message:"Error! Silakan isi form dengan benar.",color:"negative",spinner:!1})):(this.resetForm(),o({message:a.msg,color:"positive",icon:"done",spinner:!1}),this.data.kepemilikan="",s())})},getOwnership(){r().state.rows=25,r().getData({token:i,lang:"indonesia",limit:25,offset:this.current-1,orderBy:"kepemilikan",searchBy:"kepemilikan",sort:"ASC",search:"",url:`${u.apiPublicPath}${this.baseUrl}get-data/`,autoReset:{active:!0,timeout:500}})},resetForm(){this.error={},this.current=1,r().reloadData()}}});export{d as u};
