import{_ as L,al as N,r as v,c as x,ah as O,l as t,m as h,f as a,n as o,Q as y,u as s,K as r,J as i,p as T,F as K,ai as D,t as J,M as S,I as C,G as c,ap as M,an as U}from"./index-DgzO9q1o.js";import{Q as $,a as f,b as j}from"./QItemSection-DrLIYJn9.js";import{Q as A}from"./QList-DN8kWogn.js";import{Q as G}from"./QForm-B5HhFEJp.js";import{u as P}from"./fund-store-BSyNh25r.js";import{u as R}from"./use-quasar-D0HptIaq.js";import{v as z,f as H,M as W}from"./cleave-zen.module-BjngOIXk.js";const X={__name:"EditFormContent",props:{mobile:{type:Boolean,default:!1}},setup(Q){const g=Q,e=P(),I=N(),V=R(),n=v(!1),m=v(!0),b=x(()=>e.data.kepemilikan),k=()=>{m.value=!1,e.save(w)},q=u=>{e.data.ownerId=u.value,e.data.ownerName=u.label},_=()=>{e.addBalance(),n.value=!1,m.value=!0},B=()=>{if(e.ownerList.length>0){n.value=!0;const u=v(null);setTimeout(()=>{u.value=document.querySelector(".saldo"),u.value.addEventListener("input",d=>{const p=d.target.value;e.data.balance=W(p)})},500)}else V.notify({type:"negative",message:"Silakan tambah data pemilik terlebih dahulu",position:"center"})},F=()=>{n.value=!1},w=()=>{g.mobile?I.push("/sumber-dana"):(e.showEditForm=!1,e.fundId=null,e.data={nama:"",kepemilikan:[],ownerName:"",ownerId:null,balance:0})};return(u,d)=>{const p=O("dropdown-search");return t(),h("div",null,[a(M,{class:"scroll card-section"},{default:o(()=>[a(G,{class:"q-gutter-xs",onSubmit:k},{default:o(()=>[a(y,{outlined:"",modelValue:s(e).data.nama,"onUpdate:modelValue":d[0]||(d[0]=l=>s(e).data.nama=l),class:"rounded-field",label:"Nama Sumber Dana"},null,8,["modelValue"]),n.value?(t(),r(p,{key:0,onSelected:q,label:"Pilih Kepemilikan",list:s(e).ownerList,"options-value":{label:"kepemilikan",value:"id"},"load-on-route":"","custom-class":"rounded-field q-mt-md"},null,8,["list"])):i("",!0),n.value?(t(),r(y,{key:1,outlined:"",modelValue:s(e).data.balance,"onUpdate:modelValue":d[1]||(d[1]=l=>s(e).data.balance=l),class:"rounded-field q-mt-md",label:"Jumlah Saldo","input-class":"saldo",rules:[l=>s(z)(l)||"Jumlah Saldo Tidak Valid"],onKeyup:T(_,["enter"])},null,8,["modelValue","rules"])):i("",!0),b.value.length>0&&m.value?(t(),r(A,{key:2,bordered:"",class:"rounded-borders q-mt-md",separator:""},{default:o(()=>[(t(!0),h(K,null,D(b.value,(l,E)=>(t(),r($,{clickable:"",key:E},{default:o(()=>[a(f,{avatar:""},{default:o(()=>[a(J,{name:"credit_card"})]),_:1}),a(f,null,{default:o(()=>[S(C(l.name)+" ",1),a(j,{caption:""},{default:o(()=>[S(C(s(H)(l.jumlah_dana)),1)]),_:2},1024)]),_:2},1024),a(f,{side:""},{default:o(()=>[a(c,{class:"custom-round",flat:"",color:"primary",icon:"r_delete_outline",onClick:Y=>s(e).removeBalance(l)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):i("",!0),n.value?i("",!0):(t(),r(c,{key:3,unelevated:"",label:"Tambah Saldo",onClick:B,class:"save-btn q-mt-md",color:"blue",icon:"add",style:{width:"100%"}})),n.value?(t(),r(c,{key:4,unelevated:"",label:"Simpan Saldo",onClick:_,class:"save-btn q-mt-md",color:"blue",icon:"save",style:{width:"100%"}})):i("",!0),n.value?(t(),r(c,{key:5,unelevated:"",label:"Batalkan",onClick:F,class:"save-btn q-mt-md",color:"negative",icon:"close",style:{width:"100%"}})):i("",!0)]),_:1})]),_:1}),a(U,{align:"right"},{default:o(()=>[a(c,{flat:"",label:"Tutup",onClick:w,class:"custom-round",color:"negative"}),a(c,{unelevated:"",label:"Simpan",onClick:k,class:"save-btn",color:"primary"})]),_:1})])}}},se=L(X,[["__file","EditFormContent.vue"]]);export{se as E};
