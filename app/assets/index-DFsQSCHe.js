import{al as T,r as P,aW as U,c as y}from"./index-BEae-QxD.js";var v=P(null),k=P(null),e=U({pageLinks:[],prev:0,next:0,last:0,first:0,limit:10,offset:0,setStart:0,totalRows:0,numLinks:!0,usePost:!1,useHeader:!1,showPaging:!0,linkClass:"item",activeClass:"active",disabledClass:"disabled",url:"",rows:10,data:[],search:"",sort:"ASC",orderBy:"",searchBy:"",linkNum:!1,whereClause:null,ascendingSort:!1,token:"",mode:"cors",debug:!1,rawResponse:[],delay:0,autoReset:0,sentences:{indonesia:{noData:"Tidak ada data yang ditampilkan",showRows:"Menampilkan baris",from:"dari",rows:"baris"},english:{noData:"No data to display",showRows:"Showing row",from:"from",rows:"rows"}},pagingLang:"english"});function x(a){return a+1===f.value?e.disabledClass:""}function A(){e.search===""&&e.autoReset>0&&setTimeout(function(){e.offset=0,i()},e.autoReset)}function _(a){e.offset=a,i()}function E(){setTimeout(function(){e.offset=0,i()},e.delay)}function O(){e.offset=f.value-1,i()}function j(a){e.sort==="ASC"?e.ascendingSort=!0:e.ascendingSort=!1,e.ascendingSort?(e.ascendingSort=!1,e.sort="DESC"):(e.ascendingSort=!0,e.sort="ASC"),e.orderBy=a,i()}function G(){e.limit=e.rows,e.offset=0,i()}function i(){C({url:e.url,sort:e.sort,token:e.token,limit:e.limit,offset:e.offset,search:e.search,orderBy:e.orderBy,searchBy:e.searchBy,lang:e.pagingLang,linkNum:e.linkNum,where:e.whereClause,mode:e.mode,linkClass:e.linkClass,useHeader:e.useHeader,usePost:e.usePost,autoReset:e.autoReset,activeClass:e.activeClass,delay:e.delay,debug:e.debug,beforeRequest:function(){v.value!==null&&v.value()},afterRequest:function(){k.value!==null&&k.value()}},!0),e.debug&&(console.clear(),console.info("[SSPaging] If you see this message, it means getData() is executed through runPaging() and your initial options have been redefined using reactive state."))}function C(a,r){r===void 0&&(r=!1),e.token=a.token,e.pagingLang=a.lang,e.debug=a.debug;var n=a.url,u=a.limit,B=a.offset,L=a.orderBy,N=a.searchBy,D=a.sort,q=a.search;if(n===void 0||u===void 0||B===void 0||L===void 0||N===void 0||D===void 0||q===void 0){console.error("[SSPaging] Please provide url, limit, offset, orderBy, searchBy, sort and search in getData() options");return}e.url=a.url,e.limit=a.limit,e.offset=a.offset*a.limit,e.orderBy=a.orderBy,e.useHeader=a.useHeader,e.usePost=a.usePost,typeof a.searchBy=="string"?e.searchBy=a.searchBy:e.searchBy=a.searchBy.join("-"),e.sort=a.sort,e.search=a.search;var d;e.search===""?d="":d="/"+e.search;var o=a.url;a.useHeader&&(o="".concat(o,"/").concat(e.searchBy)),!a.useHeader&&!a.usePost&&(o="".concat(o,"/").concat(e.limit,"/").concat(e.offset,"/").concat(e.orderBy,"/").concat(e.searchBy,"/").concat(e.sort));var w=a.usePost?o:"".concat(o).concat(d);a.autoReset!==void 0&&(e.autoReset=a.autoReset),a.delay!==void 0&&(e.delay=a.delay),a.beforeRequest!==void 0&&(r||(v.value=function(){return a.beforeRequest()}),a.beforeRequest());var l=new Headers;a.token!==void 0&&l.set("Authorization",a.token),a.useHeader&&(l.set("limit",e.limit.toString()),l.set("offset",e.offset.toString()),l.set("orderBy",e.orderBy),l.set("sort",e.sort));var t=new FormData;a.usePost&&(t.append("limit",e.limit.toString()),t.append("offset",e.offset.toString()),t.append("orderBy",e.orderBy),t.append("sort",e.sort),t.append("search",e.search),t.append("searchBy",e.searchBy));var b={method:"GET",mode:a.mode===void 0?"cors":a.mode,headers:l},H={method:"POST",mode:b.mode,body:t};a.mode!==void 0&&(e.mode=a.mode),fetch(w,a.usePost?H:b).then(function(s){return s.json()}).then(function(s){var c,g,m,h;e.rawResponse=s,e.data=s.container,I({rows:s.totalRows,start:a.offset,linkNum:(c=a.linkNum)!==null&&c!==void 0?c:e.linkNum,activeClass:(g=a.activeClass)!==null&&g!==void 0?g:e.activeClass,linkClass:(m=a.linkClass)!==null&&m!==void 0?m:e.linkClass,disabledClass:(h=a.disabledClass)!==null&&h!==void 0?h:e.disabledClass}),a.afterRequest!==void 0&&(r||(k.value=function(){return a.afterRequest()}),a.afterRequest()),e.debug&&(console.info("[SSPaging] Generated URL: ",w),console.info("[SSPaging] Reactive state:"),console.log(e),console.info("[SSPaging] Below are options you have provided:"),console.log(a))}).catch(function(s){console.error("Error:",s)})}function I(a){e.totalRows=a.rows,e.activeClass=a.activeClass,e.linkClass=a.linkClass,e.disabledClass=a.disabledClass,e.linkNum=a.linkNum,e.pageLinks=[];var r=a.rows/e.limit;r=Math.ceil(r);var n;a.linkNum===!1&&(e.numLinks=!1),typeof a.linkNum=="number"?a.linkNum>r||a.linkNum<1?n=1:(a.linkNum%2!==0?n=a.linkNum-1:n=a.linkNum,n=f.value-n/2,n<1&&(n=1)):n=1;for(var u=n;u<=r&&(e.pageLinks.push(u),e.pageLinks.length!==a.linkNum);u++);e.last=r,a.start===(e.last-=1)?e.next=a.start:e.next=a.start+1,a.start===e.first?e.prev=a.start:e.prev=a.start-1,e.debug&&(console.info("[SSPaging] Settings for generating pagination:"),console.log(a),console.info("[SSPaging] Total possible links (if shown): "+r),console.info("[SSPaging] Start link: "+n),console.info("[SSPaging] If startLink value never change, it may caused linkNum is hidden"))}function M(a){return a===f.value?e.activeClass:""}function z(a){return S.value+a}var f=y(function(){return e.offset/e.limit+1}),R=y(function(){var a=e.offset/e.limit,r;return a===e.last?r=e.totalRows:r=e.offset+e.limit,r}),S=y(function(){var a;return e.offset===0?a=1:a=e.offset+1,a});function W(){if(e.pageLinks.length===0)return e.showPaging=!1,e.sentences[e.pagingLang]===void 0?"":e.sentences[e.pagingLang].noData;e.showPaging=!0;var a="Unable to load rows range.";return e.sentences[e.pagingLang]!==void 0&&(a="".concat(e.sentences[e.pagingLang].showRows," ").concat(S.value,` - 
                      `).concat(R.value," ").concat(e.sentences[e.pagingLang].from," ").concat(e.totalRows,` 
                      `).concat(e.sentences[e.pagingLang].rows)),a}function p(){return{state:e,dataTo:R,dataFrom:S,activePage:f,nav:_,filter:E,getData:C,rowRange:W,sortData:j,runPaging:i,reloadData:O,itemNumber:z,activeLink:M,isDisabled:x,showPerPage:G,onSearchChanged:A}}var J=T("sspaging",function(){return p()});export{J as u};
