import{N as le,_ as E,c as u,w as q,m as Q,j as p,n as O,p as oe,q as y,Q as G,t as h,u as x,v as ie,x as ue,y as se,z as re,A as de,r as F,B as ce,C as K,D as ge,E as me,h as C,g as fe,G as $,H as L,I as ve,J as H,K as R,L as W,M as be}from"./index-DOIfR-E0.js";import{u as k}from"./use-quasar-CJxJdaVh.js";import{u as I}from"./index-PjOSkoxj.js";import{d as _e}from"./screen-DyKRlQUL.js";import{Q as ye,a as he}from"./QItemSection-BX9a_2Pg.js";import{Q as Se}from"./QSelect-BvGSk8Fm.js";import"./QItemLabel-ItSIKkgz.js";import"./selection-CgKHTt05.js";function pe(e,s="positive",a="top"){le.create({message:e,position:a,color:s,multiline:!0})}function j(){pe("Something went wrong, please refresh this page.","negative")}const xe={__name:"SearchBox",props:{label:{type:String},rootClass:{type:String,default:"col-12 col-md-4"}},setup(e,{expose:s}){s();const a=I(),t=k();let r=u(()=>a.state.search);q(r,()=>a.onSearchChanged());const o=u(()=>t.screen.lt.sm?"rounded-field":""),b={paging:a,$q:t,get search(){return r},set search(d){r=d},rounded:o,filter:()=>{t.cookies.has(h.cookieName)?a.filter():j()},get useQuasar(){return k},computed:u,watch:q,get conf(){return h},get errorNotif(){return j},get usePagingStore(){return I},get dense(){return _e}};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}};function ke(e,s,a,t,r,o){return x(),Q("div",{class:y([a.rootClass,"justify-data-options"])},[p(G,{outlined:"","bottom-slots":"",modelValue:t.paging.state.search,"onUpdate:modelValue":s[0]||(s[0]=i=>t.paging.state.search=i),label:a.label,onKeyup:oe(t.filter,["enter"]),dense:t.dense(),class:y(t.rounded)},{append:O(()=>[p(ie,{name:"search",onClick:t.filter,class:"cursor-pointer"})]),_:1},8,["modelValue","label","dense","class"])],2)}const Pe=E(xe,[["render",ke],["__file","SearchBox.vue"]]);function D(e,s){return[!0,!1].includes(e)?e:s}const Ve=ue({name:"QPagination",props:{...se,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||re.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:s}){const{proxy:a}=fe(),{$q:t}=a,r=de(e,t),o=u(()=>parseInt(e.min,10)),i=u(()=>parseInt(e.max,10)),b=u(()=>parseInt(e.maxPages,10)),d=u(()=>S.value+" / "+i.value),f=u(()=>D(e.boundaryLinks,e.input)),c=u(()=>D(e.boundaryNumbers,!e.input)),g=u(()=>D(e.directionLinks,e.input)),M=u(()=>D(e.ellipses,!e.input)),w=F(null),S=u({get:()=>e.modelValue,set:n=>{if(n=parseInt(n,10),e.disable||isNaN(n))return;const l=ce(n,o.value,i.value);e.modelValue!==l&&s("update:modelValue",l)}});q(()=>`${o.value}|${i.value}`,()=>{S.value=e.modelValue});const J=u(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),T=u(()=>e.gutter in K?`${K[e.gutter]}px`:e.gutter||null),X=u(()=>T.value!==null?`--q-pagination-gutter-parent:-${T.value};--q-pagination-gutter-child:${T.value}`:null),N=u(()=>{const n=[e.iconFirst||t.iconSet.pagination.first,e.iconPrev||t.iconSet.pagination.prev,e.iconNext||t.iconSet.pagination.next,e.iconLast||t.iconSet.pagination.last];return t.lang.rtl===!0?n.reverse():n}),Y=u(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),A=u(()=>ge(e,"flat")),Z=u(()=>({[A.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),ee=u(()=>{const n={[A.value]:!1};return e.activeDesign!==""&&(n[e.activeDesign]=!0),n}),te=u(()=>({...ee.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),P=u(()=>{let n=Math.max(b.value,1+(M.value?2:0)+(c.value?2:0));const l={pgFrom:o.value,pgTo:i.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(i.value).length)}em`}};return b.value&&n<i.value-o.value+1&&(n=1+Math.floor(n/2)*2,l.pgFrom=Math.max(o.value,Math.min(i.value-n+1,e.modelValue-Math.floor(n/2))),l.pgTo=Math.min(i.value,l.pgFrom+n-1),c.value&&(l.boundaryStart=!0,l.pgFrom++),M.value&&l.pgFrom>o.value+(c.value?1:0)&&(l.ellipsesStart=!0,l.pgFrom++),c.value&&(l.boundaryEnd=!0,l.pgTo--),M.value&&l.pgTo<i.value-(c.value?1:0)&&(l.ellipsesEnd=!0,l.pgTo--)),l});function U(n){S.value=n}function ae(n){S.value=S.value+n}const ne=u(()=>{function n(){S.value=w.value,w.value=null}return{"onUpdate:modelValue":l=>{w.value=l},onKeyup:l=>{me(l,13)===!0&&n()},onBlur:n}});function v(n,l,V){const _={"aria-label":l,"aria-current":"false",...Z.value,...n};return V===!0&&Object.assign(_,{"aria-current":"true",...te.value}),l!==void 0&&(e.toFn!==void 0?_.to=e.toFn(l):_.onClick=()=>{U(l)}),C($,_)}return Object.assign(a,{set:U,setByOffset:ae}),()=>{const n=[],l=[];let V;if(f.value===!0&&(n.push(v({key:"bls",disable:e.disable||e.modelValue<=o.value,icon:N.value[0]},o.value)),l.unshift(v({key:"ble",disable:e.disable||e.modelValue>=i.value,icon:N.value[3]},i.value))),g.value===!0&&(n.push(v({key:"bdp",disable:e.disable||e.modelValue<=o.value,icon:N.value[1]},e.modelValue-1)),l.unshift(v({key:"bdn",disable:e.disable||e.modelValue>=i.value,icon:N.value[2]},e.modelValue+1))),e.input!==!0){V=[];const{pgFrom:_,pgTo:z,marginalStyle:B}=P.value;if(P.value.boundaryStart===!0){const m=o.value===e.modelValue;n.push(v({key:"bns",style:B,disable:e.disable,label:o.value},o.value,m))}if(P.value.boundaryEnd===!0){const m=i.value===e.modelValue;l.unshift(v({key:"bne",style:B,disable:e.disable,label:i.value},i.value,m))}P.value.ellipsesStart===!0&&n.push(v({key:"bes",style:B,disable:e.disable,label:"…",ripple:!1},_-1)),P.value.ellipsesEnd===!0&&l.unshift(v({key:"bee",style:B,disable:e.disable,label:"…",ripple:!1},z+1));for(let m=_;m<=z;m++)V.push(v({key:`bpg${m}`,style:B,disable:e.disable,label:m},m,m===e.modelValue))}return C("div",{class:J.value,...Y.value},[C("div",{class:"q-pagination__content row no-wrap items-center",style:X.value},[...n,e.input===!0?C(G,{class:"inline",style:{width:`${d.value.length/1.5}em`},type:"number",dense:!0,value:w.value,disable:e.disable,dark:r.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:d.value,min:o.value,max:i.value,...ne.value}):C("div",{class:"q-pagination__middle row justify-center"},V),...l])])}}}),Be={__name:"DataNavigator",props:{modelValue:[Number,String],rangeWidth:{type:String,default:"col-12 col-md-6"},navWidth:{type:String,default:"col-10 col-md-2"},navOffset:{type:String,default:"offset-md-3"}},emits:["update:modelValue"],setup(e,{expose:s,emit:a}){s();const t=a,r=k(),o=I(),i=()=>u(()=>o.state.pageLinks).value.length,b=c=>{r.cookies.has(h.cookieName)?(t("update:modelValue",c),o.nav(c-1)):j()},d=u(()=>o.rowRange()),f={emit:t,$q:r,paging:o,totalPages:i,onPaginationUpdate:b,rowRange:d,computed:u,get useQuasar(){return k},get conf(){return h},get errorNotif(){return j},get usePagingStore(){return I}};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}},Ce={class:"q-pa-sm"},we={class:"row"};function Ne(e,s,a,t,r,o){return x(),Q("div",Ce,[L("div",we,[L("div",{class:y([a.rangeWidth,"q-mt-sm"])},[L("p",null,ve(t.rowRange),1)],2),L("div",{class:y(["col-2 col-md-1",a.navOffset])},[t.totalPages()>0?(x(),H($,{key:0,color:"primary",flat:"",class:"custom-round refresh-button",icon:"refresh",onClick:s[0]||(s[0]=i=>t.paging.reloadData())})):R("",!0)],2),t.totalPages()>0?(x(),Q("div",{key:0,class:y([a.navWidth])},[p(Ve,{"model-value":a.modelValue,max:t.totalPages(),input:"","onUpdate:modelValue":t.onPaginationUpdate},null,8,["model-value","max"])],2)):R("",!0)])])}const Le=E(Be,[["render",Ne],["__scopeId","data-v-a4fdc2e4"],["__file","DataNavigator.vue"]]),De={__name:"LogoutButton",setup(e,{expose:s}){s();const a=k(),r={$q:a,logout:()=>{W.get("logout-user",{headers:{Authorization:`Bearer ${a.cookies.get(h.cookieName)}`}}).then(({data:o})=>{o.status==="success"&&(a.cookies.remove(h.cookieName,{path:"/"}),a.cookies.remove("sisauang_api_session"),localStorage.removeItem("username"),window.location.reload())})},get useQuasar(){return k},get api(){return W},get conf(){return h}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}};function Oe(e,s,a,t,r,o){return x(),H($,{color:"negative",class:"custom-round",style:{width:"100%"},icon:"r_logout",label:"Logout",onClick:t.logout})}const Fe=E(De,[["render",Oe],["__file","LogoutButton.vue"]]),qe={name:"DropdownSearch",props:["loader","labelAsOption","label","list","optionsValue","flexGrid","param","loadOnRoute","default","disable","customClass"],emits:["selected"],setup(e,{emit:s}){const a=F([]),t=F({}),r=F([]),o=d=>{s("selected",d),t.value=d};let i=null;return e.default!==void 0?i={label:e.default.label,value:e.default.value}:e.label===void 0&&(i={label:e.labelAsOption,value:null}),t.value=i,r.value=[i],(async()=>(e.loadOnRoute===void 0&&(e.param!==void 0?e.loader(e.param):e.loader()),new Promise(d=>setTimeout(d,500))))().then(async()=>{const d=u(()=>e.list),f=async()=>{r.value=[],await d.value.forEach(g=>{r.value.push({label:g[e.optionsValue.label],value:g[e.optionsValue.value]})}),e.default===void 0&&(t.value=r.value[0])};await f(),q(d,f);const c=g=>[g.value,g];a.value=[...new Map(r.value.map(c)).values()]}),{options:a,model:t,filterFn(d,f){f(()=>{const c=d.toLowerCase();a.value=r.value.filter(g=>{if(g!==null)return g.label.toLowerCase().indexOf(c)>-1})})},selectedHandler:o}}};function Qe(e,s,a,t,r,o){return x(),Q("div",{class:y(["col-12 q-mt-sm",a.flexGrid])},[p(Se,{class:y(a.customClass),disable:a.disable,outlined:"","model-value":t.model,"use-input":"","input-debounce":"0",options:t.options,onFilter:t.filterFn,"onUpdate:modelValue":t.selectedHandler,label:a.label},{"no-option":O(()=>[p(ye,null,{default:O(()=>[p(he,{class:"text-grey"},{default:O(()=>s[0]||(s[0]=[be(" No results ")])),_:1})]),_:1})]),_:1},8,["class","disable","model-value","options","onFilter","onUpdate:modelValue","label"])],2)}const Ie=E(qe,[["render",Qe],["__file","DropdownSearch.vue"]]),Ke=({app:e})=>{e.component("search-box",Pe),e.component("data-nav",Le),e.component("logout-btn",Fe),e.component("dropdown-search",Ie)};export{Ke as default};
