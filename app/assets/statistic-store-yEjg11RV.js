import{al as l,aA as D,L as s,am as o}from"./index-BEae-QxD.js";import{d as a}from"./date-DuxP8qnT.js";import{i as g}from"./utils-Bi8AkgVO.js";const f=l("statistic",{state:()=>({baseUrl:"statistic/",range:{label:"Bulanan",value:"monthly"},dateRange:Date.now(),dateRangeText:"",balanceSummary:[],totalIncome:0,totalExpense:0,netIncome:0,biggestTransaction:{response:[],category:[],totalTransaction:[]},allTransactions:{income:[],expense:[]}}),actions:{getTotalBalance(){s.get(`${this.baseUrl}get-total-balance/${this.dateRange}`,{headers:{Authorization:o}}).then(({data:t})=>{this.balanceSummary=t})},getAllTransactionByCategory(t){s.get(`${this.baseUrl}get-all-transaction-by-category/${t}`,{headers:{Authorization:o}}).then(({data:e})=>{this.allTransactions=e})},getBiggestTransactionByCategory(){s.get(`${this.baseUrl}get-biggest-transaction-by-category/${this.dateRange}`,{headers:{Authorization:o}}).then(({data:t})=>{this.biggestTransaction=t})},getTotalIncomeExpense(){s.get(`${this.baseUrl}get-total-income-expense/${this.dateRange}`,{headers:{Authorization:o}}).then(({data:t})=>{this.totalIncome=t.total_income,this.totalExpense=t.total_expense,this.netIncome=t.net_income})},setDateFromTodayDate(){let t=this.dateRange.split("-");t[2]=new Date().getDate(),this.dateRange=t.join("-")},setDateRange(){if(this.range.value==="daily")this.setDateFromTodayDate(),this.dateRangeText=this.formatDateStr(this.dateRange),this.dateRange=this.formatDateValue(this.dateRange);else if(this.range.value==="weekly"){this.setDateFromTodayDate();const t=this.getWeeklyRange(this.dateRange),e=t.start,n=t.end;this.dateRangeText=`${this.formatDateStr(e)} - ${this.formatDateStr(n)}`,this.dateRange=`${this.formatDateValue(e)}_${this.formatDateValue(n)}`}else if(this.range.value==="monthly"){const t=a.startOfDate(this.dateRange,"month"),e=a.endOfDate(this.dateRange,"month");this.dateRangeText=`${this.formatDateStr(t)} - ${this.formatDateStr(e)}`,this.dateRange=`${this.formatDateValue(t)}_${this.formatDateValue(e)}`}else if(this.range.value==="yearly"){const t=a.startOfDate(this.dateRange,"year"),e=a.endOfDate(this.dateRange,"year");this.dateRangeText=`${this.formatDateStr(t)} - ${this.formatDateStr(e)}`,this.dateRange=`${this.formatDateValue(t)}_${this.formatDateValue(e)}`}},getWeeklyRange(t){const e=new Date(t),n=e.getDay(),i=new Date(e);i.setDate(e.getDate()-n);const r=new Date(e);r.setDate(e.getDate()+(6-n));const h={year:"numeric",month:"2-digit",day:"2-digit"};return{start:i.toLocaleDateString("en-CA",h),end:r.toLocaleDateString("en-CA",h)}},formatDateValue(t){return a.formatDate(t,"YYYY-MM-DD",g)},formatDateStr(t){const e=D.lt.sm?"DD MMM YYYY":"DD MMMM YYYY";return a.formatDate(t,e,g)}}});export{f as u};
