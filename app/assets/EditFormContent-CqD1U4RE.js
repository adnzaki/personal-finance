import{_ as D,ao as y,r as m,c as S,ah as T,u as l,m as g,j as t,n as o,Q,J as n,K as d,p as K,F as j,ai as J,v as M,M as I,I as C,G as u,am as P,ap as R}from"./index-BZZT44KJ.js";import{Q as U,a as b}from"./QItemSection-DLWHKYY7.js";import{Q as A}from"./QItemLabel-DC3yL2Rm.js";import{Q as G}from"./QList-bPvu_f1w.js";import{Q as z}from"./QForm-CdMIu-8w.js";import{u as O}from"./fund-store-CsNGxTnE.js";import{u as B}from"./use-quasar-D0AYiH4P.js";import{f as H,v as W,M as F}from"./cleave-zen.module-BjngOIXk.js";const X={__name:"EditFormContent",props:{mobile:{type:Boolean,default:!1}},setup(w,{expose:r}){r();const c=w,e=O(),f=y(),p=B(),s=m(!1),a=m(!0),v=S(()=>e.data.kepemilikan),k=()=>{a.value=!1,e.save(_)},N=i=>{e.data.ownerId=i.value,e.data.ownerName=i.label},V=()=>{e.addBalance(),s.value=!1,a.value=!0},q=()=>{if(e.ownerList.length>0){s.value=!0;const i=m(null);setTimeout(()=>{i.value=document.querySelector(".saldo"),i.value.addEventListener("input",x=>{const E=x.target.value;e.data.balance=F(E)})},500)}else p.notify({type:"negative",message:"Silakan tambah data pemilik terlebih dahulu",position:"center"})},L=()=>{s.value=!1},_=()=>{c.mobile?f.push("/sumber-dana"):e.showEditForm=!1,e.fundId=null,e.data={nama:"",kepemilikan:[],ownerName:"",ownerId:null,balance:0}},h={props:c,store:e,router:f,$q:p,showOwnerInput:s,showOwnerList:a,kepemilikan:v,save:k,onOwnerSelected:N,addBalance:V,addOwner:q,closeOwner:L,closeForm:_,get useFundStore(){return O},get useRouter(){return y},ref:m,computed:S,get useQuasar(){return B},get formatDecimal(){return H},get validateNumber(){return W},get formatNumeral(){return F}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}};function Y(w,r,c,e,f,p){const s=T("dropdown-search");return l(),g("div",null,[t(P,{class:"scroll card-section"},{default:o(()=>[t(z,{class:"q-gutter-xs",onSubmit:e.save},{default:o(()=>[t(Q,{outlined:"",modelValue:e.store.data.nama,"onUpdate:modelValue":r[0]||(r[0]=a=>e.store.data.nama=a),class:"rounded-field",label:"Nama Sumber Dana"},null,8,["modelValue"]),e.showOwnerInput?(l(),n(s,{key:0,onSelected:e.onOwnerSelected,label:"Pilih Kepemilikan",list:e.store.ownerList,"options-value":{label:"kepemilikan",value:"id"},"load-on-route":"","custom-class":"rounded-field q-mt-md"},null,8,["list"])):d("",!0),e.showOwnerInput?(l(),n(Q,{key:1,outlined:"",modelValue:e.store.data.balance,"onUpdate:modelValue":r[1]||(r[1]=a=>e.store.data.balance=a),class:"rounded-field q-mt-md",label:"Jumlah Saldo","input-class":"saldo",rules:[a=>e.validateNumber(a)||"Jumlah Saldo Tidak Valid"],onKeyup:K(e.addBalance,["enter"])},null,8,["modelValue","rules"])):d("",!0),e.kepemilikan.length>0&&e.showOwnerList?(l(),n(G,{key:2,bordered:"",class:"rounded-borders q-mt-md",separator:""},{default:o(()=>[(l(!0),g(j,null,J(e.kepemilikan,(a,v)=>(l(),n(U,{clickable:"",key:v},{default:o(()=>[t(b,{avatar:""},{default:o(()=>[t(M,{name:"credit_card"})]),_:1}),t(b,null,{default:o(()=>[I(C(a.name)+" ",1),t(A,{caption:""},{default:o(()=>[I(C(e.formatDecimal(a.jumlah_dana)),1)]),_:2},1024)]),_:2},1024),t(b,{side:""},{default:o(()=>[t(u,{class:"custom-round",flat:"",color:"primary",icon:"r_delete_outline",onClick:k=>e.store.removeBalance(a)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):d("",!0),e.showOwnerInput?d("",!0):(l(),n(u,{key:3,unelevated:"",label:"Tambah Saldo",onClick:e.addOwner,class:"save-btn q-mt-md",color:"blue",icon:"add",style:{width:"100%"}})),e.showOwnerInput?(l(),n(u,{key:4,unelevated:"",label:"Simpan Saldo",onClick:e.addBalance,class:"save-btn q-mt-md",color:"blue",icon:"save",style:{width:"100%"}})):d("",!0),e.showOwnerInput?(l(),n(u,{key:5,unelevated:"",label:"Batalkan",onClick:e.closeOwner,class:"save-btn q-mt-md",color:"negative",icon:"close",style:{width:"100%"}})):d("",!0)]),_:1})]),_:1}),t(R,{align:"right"},{default:o(()=>[t(u,{flat:"",label:"Tutup",onClick:e.closeForm,class:"custom-round",color:"negative"}),t(u,{unelevated:"",label:"Simpan",onClick:e.save,class:"save-btn",color:"primary"})]),_:1})])}const re=D(X,[["render",Y],["__file","EditFormContent.vue"]]);export{re as E};
