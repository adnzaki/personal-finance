import{_ as y,r as t,c as C,l as g,J as Q,n as i,f as l,H as c,am as S,q as f,ap as L,Q as _,p as w,m as M,I as U,K as N,G as B,M as D,L as P,av as T,v as r}from"./index-Co0Oj5A4.js";import{a as I,b as K}from"./QLayout-CCMcsyfe.js";import{u as z}from"./use-quasar-CWjDRKn1.js";const E={class:"q-pa-md q-mt-xl row items-start q-gutter-md"},F=c("div",{class:"text-h6 text-center"},[D(" Login "),c("strong",null,"SisaUang")],-1),H={class:"q-gutter-lg q-mt-lg"},R={__name:"LoginPage",setup($){const v=z(),n=t(""),u=t("");t(!0);const m=t(!1),a=t(""),o=t("black"),h=C(()=>v.screen.lt.sm?"col-12 q-ml-sm":""),d=()=>{a.value="",m.value=!0;const p=()=>m.value=!1;if(n.value===""||u.value==="")a.value="Username dan password wajib diisi",o.value="negative",setTimeout(p,6e3);else{const s={username:n.value,password:u.value};a.value="Memroses autentikasi...",P.post("validate-login",s,{transformRequest:[e=>T(e)]}).then(({data:e})=>{if(e.status==="failed")a.value=e.message,o.value="negative";else{a.value="Login berhasil. Mengalihkan ke halaman utama...",o.value="positive",r.cookieExp*=12*360;const x=new Date,k=x.getTime(),q=k+r.cookieExp,V=new Date(q),b={expires:V.toUTCString(),path:"/",sameSite:"None",secure:!0};v.cookies.set(r.cookieName,e.token,b),localStorage.setItem("username",e.user.username),window.location.href=r.homeUrl()}}).catch(e=>{a.value=e,o.value="negative",setTimeout(p,6e3)})}};return(p,s)=>(g(),Q(K,{view:"hHh lpR fFf",class:"login-layout"},{default:i(()=>[l(I,null,{default:i(()=>[c("div",E,[l(S,{class:f(["login-card col-md-4 col-sm-8 offset-md-4 offset-sm-2",h.value])},{default:i(()=>[l(L,null,{default:i(()=>[F,c("div",H,[l(_,{outlined:"",modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=e=>n.value=e),label:"Username",onKeyup:w(d,["enter"]),class:"rounded-field"},null,8,["modelValue"]),l(_,{outlined:"",modelValue:u.value,"onUpdate:modelValue":s[1]||(s[1]=e=>u.value=e),label:"Password",type:"password",onKeyup:w(d,["enter"]),class:"rounded-field"},null,8,["modelValue"])]),m.value?(g(),M("p",{key:0,class:f([`text-bold text-${o.value}`,"q-mt-md"])},U(a.value),3)):N("",!0),l(B,{color:"primary",size:"lg",icon:"r_login",label:"Sign In",class:"full-width q-mt-xl custom-round",onClick:d})]),_:1})]),_:1},8,["class"])])]),_:1})]),_:1}))}},O=y(R,[["__file","LoginPage.vue"]]);export{O as default};
