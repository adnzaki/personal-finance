import{ar as c,as as p,N as m,L as n,at as i,au as l,av as h,v as u}from"./index-Cl96Yac8.js";import{u as r}from"./index-DtiVxpri.js";const d=c("ownership",{state:()=>({baseUrl:"ownership/",error:{},current:1,showAddForm:!1,showEditForm:!1,disableButton:!1,formTitle:"Tambah Kepemilikan",data:{kepemilikan:""}}),actions:{deleteOwnership(a){p.create({title:"Hapus Kepemilikan",message:"Anda yakin ingin menghapus kepemilikan ini?",cancel:!0,persistent:!0}).onOk(()=>{const s=m.create({group:!1,spinner:!0,message:"Menghapus data kepemilikan...",color:"info",position:"center",timeout:0});n.get(`${this.baseUrl}delete/${a}`,{headers:{Authorization:i}}).then(({data:e})=>{s({timeout:l,message:e.msg,spinner:!1}),e.code===200?s({color:"positive",icon:"done"}):s({color:"negative",icon:"close"}),r().reloadData()}).catch(e=>{console.error(e),s({message:e.message,color:"negative",spinner:!1,timeout:l})})}).onCancel(()=>{})},getDetail(a,s){n.get(`${this.baseUrl}detail/${a}`,{headers:{Authorization:i}}).then(({data:e})=>{this.data=e,this.formTitle="Perbarui Kepemilikan",s()}).catch(e=>{console.error(e)})},save({id:a,afterSuccess:s}){const e=a!==null?`${this.baseUrl}save/${a}`:`${this.baseUrl}save`,o=m.create({group:!1,spinner:!0,message:"Menyimpan data kepemilikan...",color:"info",position:"center",timeout:0});n.post(e,this.data,{headers:{Authorization:i},transformRequest:[t=>h(t)]}).then(({data:t})=>{o({timeout:l}),t.code===500?(this.error=t.msg,o({message:"Error! Silakan isi form dengan benar.",color:"negative",spinner:!1})):(this.resetForm(),o({message:t.msg,color:"positive",icon:"done",spinner:!1}),this.data.kepemilikan="",s())})},getOwnership(){r().state.rows=25,r().getData({token:i,lang:"indonesia",limit:25,offset:this.current-1,orderBy:"kepemilikan",searchBy:"kepemilikan",sort:"ASC",search:"",url:`${u.apiPublicPath}${this.baseUrl}get-data/`,autoReset:{active:!0,timeout:500}})},resetForm(){this.error={},this.current=1,r().reloadData()}}});export{d as u};
