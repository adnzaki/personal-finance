import{ak as g,N as y,L as v,al as h,au as N,at as k,_ as C,r as n,u as d,m as _,j as r,n as l,Q as i,v as w,am as S,J as f,G as P,K as c,ap as b,F as V}from"./index-0R1gVagW.js";import{Q as q}from"./QForm-DRWbGB0C.js";const p=g("setting",{state:()=>({baseUrl:"settings/",data:{oldPassword:"",newPassword:"",confirmNewPassword:""}}),actions:{updatePassword(){const t=`${this.baseUrl}update-password`,e=y.create({group:!1,spinner:!0,message:"Mengubah password...",color:"info",position:"center",timeout:0});v.post(t,this.data,{headers:{Authorization:h},transformRequest:[o=>N(o)]}).then(({data:o})=>{e({timeout:k}),o.code===500?(this.error=o.msg,e({message:"Error! Silakan isi form dengan benar.",color:"negative",spinner:!1})):o.code===503?e({message:`Error! ${o.msg}`,color:"negative",spinner:!1}):(e({message:"Password berhasil diubah.",color:"positive",spinner:!1}),this.data={oldPassword:null,newPassword:null,confirmNewPassword:null})}).catch(({response:o})=>{e({message:`Error! ${o.data.msg}`,color:"negative",spinner:!1})})}}}),x={__name:"ChangePassword",setup(t,{expose:e}){e();const o=p(),s=n(!1),m=n(!1),u=n("Ganti Password"),a={store:o,showPassword:s,showNewPassword:m,btnLabel:u,get useSettingStore(){return p},ref:n};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}};function Q(t,e,o,s,m,u){return d(),_(V,null,[r(S,{class:"scroll card-section"},{default:l(()=>[r(q,{class:"q-gutter-xs"},{default:l(()=>[r(i,{filled:"",modelValue:s.store.data.oldPassword,"onUpdate:modelValue":e[1]||(e[1]=a=>s.store.data.oldPassword=a),class:"rounded-field q-mb-md",label:"Password Saat Ini",type:s.showPassword?"text":"password","lazy-rules":"",rules:[a=>!!a||"Password saat ini harus diisi"]},{append:l(()=>[r(w,{name:s.showPassword?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[0]||(e[0]=a=>s.showPassword=!s.showPassword)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),r(i,{filled:"",modelValue:s.store.data.newPassword,"onUpdate:modelValue":e[3]||(e[3]=a=>s.store.data.newPassword=a),class:"rounded-field q-mb-md",label:"Password Baru","lazy-rules":"",type:s.showNewPassword?"text":"password",rules:[a=>!!a||"Password baru harus diisi"]},{append:l(()=>[r(w,{name:s.showNewPassword?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[2]||(e[2]=a=>s.showNewPassword=!s.showNewPassword)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),r(i,{filled:"",modelValue:s.store.data.confirmNewPassword,"onUpdate:modelValue":e[5]||(e[5]=a=>s.store.data.confirmNewPassword=a),class:"rounded-field",label:"Konfirmasi Password Baru","lazy-rules":"",type:s.showNewPassword?"text":"password",rules:[a=>!!a||"Silakan konfirmasi password baru terlebih dahulu",a=>a===s.store.data.newPassword||"Password tidak sama"]},{append:l(()=>[r(w,{name:s.showNewPassword?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[4]||(e[4]=a=>s.showNewPassword=!s.showNewPassword)},null,8,["name"])]),_:1},8,["modelValue","type","rules"])]),_:1})]),_:1}),r(b,{align:"center"},{default:l(()=>[t.$q.screen.lt.sm?(d(),f(P,{key:0,color:"primary",class:"btn-w95 save-btn q-mb-md",label:s.btnLabel,onClick:e[6]||(e[6]=a=>s.store.updatePassword())},null,8,["label"])):c("",!0)]),_:1}),r(b,{align:"left",class:"q-ml-sm"},{default:l(()=>[t.$q.screen.gt.xs?(d(),f(P,{key:0,color:"primary",class:"save-btn q-mb-md",label:s.btnLabel,onClick:e[7]||(e[7]=a=>s.store.updatePassword())},null,8,["label"])):c("",!0)]),_:1})],64)}const z=C(x,[["render",Q],["__file","ChangePassword.vue"]]);export{z as C};
