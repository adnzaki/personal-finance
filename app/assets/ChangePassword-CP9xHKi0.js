import{al as c,N as b,L as P,am as g,as as y,at as k,r as i,ah as C,l as V,m as p,f as r,n,t as d,u as l,Q as u,an as N,K as $,I as q,G as Q,aq as x,F as S}from"./index-Ce0IJ7ho.js";import{Q as B}from"./QForm-BLMRHq2v.js";const h=c("setting",{state:()=>({baseUrl:"settings/",data:{oldPassword:"",newPassword:"",confirmNewPassword:""}}),actions:{updatePassword(){const m=`${this.baseUrl}update-password`,a=b.create({group:!1,spinner:!0,message:"Mengubah password...",color:"info",position:"center",timeout:0});P.post(m,this.data,{headers:{Authorization:g},transformRequest:[o=>y(o)]}).then(({data:o})=>{a({timeout:k}),o.code===500?(this.error=o.msg,a({message:"Error! Silakan isi form dengan benar.",color:"negative",spinner:!1})):o.code===503?a({message:`Error! ${o.msg}`,color:"negative",spinner:!1}):(a({message:"Password berhasil diubah.",color:"positive",spinner:!1}),this.data={oldPassword:null,newPassword:null,confirmNewPassword:null})}).catch(({response:o})=>{a({message:`Error! ${o.data.msg}`,color:"negative",spinner:!1})})}}}),E={__name:"ChangePassword",setup(m){const a=h(),o=i(!1),t=i(!1),w=i("Ganti Password");return(f,e)=>{const v=C("save-btn");return p(),V(S,null,[r(N,{class:"scroll card-section"},{default:n(()=>[r(B,{class:"q-gutter-xs"},{default:n(()=>[r(d,{filled:"",modelValue:l(a).data.oldPassword,"onUpdate:modelValue":e[1]||(e[1]=s=>l(a).data.oldPassword=s),class:"rounded-field q-mb-md",label:"Password Saat Ini",type:o.value?"text":"password","lazy-rules":"",rules:[s=>!!s||"Password saat ini harus diisi"]},{append:n(()=>[r(u,{name:o.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[0]||(e[0]=s=>o.value=!o.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),r(d,{filled:"",modelValue:l(a).data.newPassword,"onUpdate:modelValue":e[3]||(e[3]=s=>l(a).data.newPassword=s),class:"rounded-field q-mb-md",label:"Password Baru","lazy-rules":"",type:t.value?"text":"password",rules:[s=>!!s||"Password baru harus diisi"]},{append:n(()=>[r(u,{name:t.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[2]||(e[2]=s=>t.value=!t.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),r(d,{filled:"",modelValue:l(a).data.confirmNewPassword,"onUpdate:modelValue":e[5]||(e[5]=s=>l(a).data.confirmNewPassword=s),class:"rounded-field",label:"Konfirmasi Password Baru","lazy-rules":"",type:t.value?"text":"password",rules:[s=>!!s||"Silakan konfirmasi password baru terlebih dahulu",s=>s===l(a).data.newPassword||"Password tidak sama"]},{append:n(()=>[r(u,{name:t.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[4]||(e[4]=s=>t.value=!t.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"])]),_:1})]),_:1}),r(x,{align:"left",class:"q-ml-sm"},{default:n(()=>[f.$q.screen.gt.xs?(p(),$(Q,{key:0,color:"primary",class:"save-btn q-mb-md",label:w.value,onClick:e[6]||(e[6]=s=>l(a).updatePassword())},null,8,["label"])):q("",!0)]),_:1}),r(v,{onClick:e[7]||(e[7]=s=>l(a).updatePassword())})],64)}}};export{E as _};
