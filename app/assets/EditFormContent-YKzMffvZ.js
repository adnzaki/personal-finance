import{_ as D,ao as y,r as c,c as S,ah as T,u as t,m as g,j as l,n as o,Q as I,J as n,K as d,p as K,F as j,ai as J,v as M,M as Q,I as C,G as u,am as P,ap as R}from"./index-B7TI8NV3.js";import{Q as U,a as b,b as A}from"./QItemLabel-BsFYiIgT.js";import{Q as G}from"./QList-CCre7GP4.js";import{Q as z}from"./QForm-T6O64geI.js";import{u as O}from"./fund-store-7KLFnCqT.js";import{u as B}from"./use-quasar-CCUQA5Di.js";import{f as H,v as W,M as F}from"./cleave-zen.module-BjngOIXk.js";const X={__name:"EditFormContent",props:{mobile:{type:Boolean,default:!1}},setup(w,{expose:r}){r();const m=w,e=O(),f=y(),p=B(),s=c(!1),a=c(!0),v=S(()=>e.data.kepemilikan),k=()=>{a.value=!1,e.save(_)},N=i=>{e.data.ownerId=i.value,e.data.ownerName=i.label},V=()=>{e.addBalance(),s.value=!1,a.value=!0},q=()=>{if(e.ownerList.length>0){s.value=!0;const i=c(null);setTimeout(()=>{i.value=document.querySelector(".saldo"),i.value.addEventListener("input",x=>{const E=x.target.value;e.data.balance=F(E)})},500)}else p.notify({type:"negative",message:"Silakan tambah data pemilik terlebih dahulu",position:"center"})},L=()=>{s.value=!1},_=()=>{m.mobile?f.push("/sumber-dana"):e.showEditForm=!1,e.fundId=null,e.data={nama:"",kepemilikan:[],ownerName:"",ownerId:null,balance:0}},h={props:m,store:e,router:f,$q:p,showOwnerInput:s,showOwnerList:a,kepemilikan:v,save:k,onOwnerSelected:N,addBalance:V,addOwner:q,closeOwner:L,closeForm:_,get useFundStore(){return O},get useRouter(){return y},ref:c,computed:S,get useQuasar(){return B},get formatDecimal(){return H},get validateNumber(){return W},get formatNumeral(){return F}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}};function Y(w,r,m,e,f,p){const s=T("dropdown-search");return t(),g("div",null,[l(P,{class:"scroll card-section"},{default:o(()=>[l(z,{class:"q-gutter-xs",onSubmit:e.save},{default:o(()=>[l(I,{outlined:"",modelValue:e.store.data.nama,"onUpdate:modelValue":r[0]||(r[0]=a=>e.store.data.nama=a),class:"rounded-field",label:"Nama Sumber Dana"},null,8,["modelValue"]),e.showOwnerInput?(t(),n(s,{key:0,onSelected:e.onOwnerSelected,label:"Pilih Kepemilikan",list:e.store.ownerList,"options-value":{label:"kepemilikan",value:"id"},"load-on-route":"","custom-class":"rounded-field q-mt-md"},null,8,["list"])):d("",!0),e.showOwnerInput?(t(),n(I,{key:1,outlined:"",modelValue:e.store.data.balance,"onUpdate:modelValue":r[1]||(r[1]=a=>e.store.data.balance=a),class:"rounded-field q-mt-md",label:"Jumlah Saldo","input-class":"saldo",rules:[a=>e.validateNumber(a)||"Jumlah Saldo Tidak Valid"],onKeyup:K(e.addBalance,["enter"])},null,8,["modelValue","rules"])):d("",!0),e.kepemilikan.length>0&&e.showOwnerList?(t(),n(G,{key:2,bordered:"",class:"rounded-borders q-mt-md",separator:""},{default:o(()=>[(t(!0),g(j,null,J(e.kepemilikan,(a,v)=>(t(),n(U,{clickable:"",key:v},{default:o(()=>[l(b,{avatar:""},{default:o(()=>[l(M,{name:"credit_card"})]),_:1}),l(b,null,{default:o(()=>[Q(C(a.name)+" ",1),l(A,{caption:""},{default:o(()=>[Q(C(e.formatDecimal(a.jumlah_dana)),1)]),_:2},1024)]),_:2},1024),l(b,{side:""},{default:o(()=>[l(u,{class:"custom-round",flat:"",color:"primary",icon:"r_delete_outline",onClick:k=>e.store.removeBalance(a)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):d("",!0),e.showOwnerInput?d("",!0):(t(),n(u,{key:3,unelevated:"",label:"Tambah Saldo",onClick:e.addOwner,class:"save-btn q-mt-md",color:"blue",icon:"add",style:{width:"100%"}})),e.showOwnerInput?(t(),n(u,{key:4,unelevated:"",label:"Simpan Saldo",onClick:e.addBalance,class:"save-btn q-mt-md",color:"blue",icon:"save",style:{width:"100%"}})):d("",!0),e.showOwnerInput?(t(),n(u,{key:5,unelevated:"",label:"Batalkan",onClick:e.closeOwner,class:"save-btn q-mt-md",color:"negative",icon:"close",style:{width:"100%"}})):d("",!0)]),_:1})]),_:1}),l(R,{align:"right"},{default:o(()=>[l(u,{flat:"",label:"Tutup",onClick:e.closeForm,class:"custom-round",color:"negative"}),l(u,{unelevated:"",label:"Simpan",onClick:e.save,class:"save-btn",color:"primary"})]),_:1})])}const ne=D(X,[["render",Y],["__file","EditFormContent.vue"]]);export{ne as E};
